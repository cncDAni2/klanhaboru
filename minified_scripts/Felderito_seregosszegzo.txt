javascript:var N=5document.location.href.indexOf("screen=overview_villages")==-1&&(alert("Ez a script az áttekintésben fut le csak.\n\nPrémiumosoknak először áttekintés átalakító futtatására van szükség a Termelői nézetbe!"),exit(0));try {RefArray=Array();WAIT=Array();FELDOLG=Array();FALUK=Array();e();var a=0,c=document.location.href.split("game.php")[0]+"game.php",d=!1;document.location.href.indexOf("t=")>0?c+="?"+document.location.href.match(/t=\d+/g)[0]+"&":c+="?";l()} catch (e) {alert(`Indítási hiba:
${e}`)}function e(){try {try {for(var i=0;i<N;i++){WAIT[i]=0;FELDOLG[i]=0}document.title="Felderítő robot | Kiképzés: Seregek";var _a=document.getElementById("production_table");if(_a.rows[0].cells.length>6)for(i=0;i<_a.rows.length;i++){_a.rows[i].deleteCell(9);_a.rows[i].deleteCell(8);_a.rows[i].deleteCell(7);_a.rows[i].deleteCell(5);_a.rows[i].deleteCell(0)}} catch (e) {alert(`PF -> Nem-PF konverziós hiba:
${e}`)}for(var i=1;i<_a.rows.length;i++)FALUK[i-1]=parseInt(_a.rows[i].cells[0].getElementsByTagName("span")[0].getAttribute("data-id").match(/\d+/g)[0]);document.getElementById("header_info").innerHTML='<a href="javascript: BOT=false; void(0);">Klikk, ha bejött a bot védelem, de már beírtad a kódot ÉS BEZÁRTAD A LAPOKAT.</a><p id="sereg"></p>';var X=document.getElementById("production_table").rows;hossz=X[0].cells[0].offsetWidth;hosszT=X[0].cells[4].offsetWidth;for(var i=0;i<X.length;i++){X[i].cells[0].width=hossz;X[i].cells[4].width="100px";if(document.getElementById("tav")){X[i].deleteCell(4);X[i].deleteCell(3);X[i].deleteCell(2);var _c=1}else{X[i].deleteCell(3);X[i].deleteCell(2);X[i].deleteCell(1);var _c=0}for(var j=0;j<2;j++){if(!j)var _d="Itthoni",_d="Összes"newcell=X[i].insertCell((j*10)+1+_c);!i&&(newcell.innerHTML=`<img src="/graphic/unit/unit_spear.png" title="${_d} lándzsások. Klikk a szűréshez." onclick=Egyseg_szuro(this)>`);newcell=X[i].insertCell((j*10)+2+_c);!i&&(newcell.innerHTML=`<img src="/graphic/unit/unit_sword.png" title="${_d} kardosok. Klikk a szűréshez." onclick=Egyseg_szuro(this)>`);newcell=X[i].insertCell((j*10)+3+_c);!i&&(newcell.innerHTML=`<img src="/graphic/unit/unit_axe.png" title="${_d} bárdosok. Klikk a szűréshez." onclick=Egyseg_szuro(this)>`);newcell=X[i].insertCell((j*10)+4+_c);!i&&(newcell.innerHTML=`<img src="/graphic/unit/unit_archer.png" title="${_d} íjászok. Klikk a szűréshez." onclick=Egyseg_szuro(this)>`);newcell=X[i].insertCell((j*10)+5+_c);!i&&(newcell.innerHTML=`<img src="/graphic/unit/unit_spy.png" title="${_d} kémek. Klikk a szűréshez." onclick=Egyseg_szuro(this)>`);newcell=X[i].insertCell((j*10)+6+_c);!i&&(newcell.innerHTML=`<img src="/graphic/unit/unit_light.png" title="${_d} könnyűlovasok. Klikk a szűréshez." onclick=Egyseg_szuro(this)>`);newcell=X[i].insertCell((j*10)+7+_c);!i&&(newcell.innerHTML=`<img src="/graphic/unit/unit_marcher.png" title="${_d} lovasíjászok. Klikk a szűréshez." onclick=Egyseg_szuro(this)>`);newcell=X[i].insertCell((j*10)+8+_c);!i&&(newcell.innerHTML=`<img src="/graphic/unit/unit_heavy.png" title="${_d} nehézlovasok. Klikk a szűréshez." onclick=Egyseg_szuro(this)>`);newcell=X[i].insertCell((j*10)+9+_c);!i&&(newcell.innerHTML=`<img src="/graphic/unit/unit_ram.png" title="${_d} kosok. Klikk a szűréshez." onclick=Egyseg_szuro(this)>`);newcell=X[i].insertCell((j*10)+10+_c);newcell.setAttribute("style","border-right:  2px solid black;");!i&&(newcell.innerHTML=`<img src="/graphic/unit/unit_catapult.png" title="${_d} katapultok. Klikk a szűréshez." onclick=Egyseg_szuro(this)>`)}newcell=X[i].insertCell(X[i].cells.length-1);newcell.style.backgroundColor="#49F";!i&&(newcell.innerHTML='<img src="/graphic/buildings/mid/barracks3.png" title="Képzési idő percben. Klikk a szűréshez." onclick=Egyseg_szuro(this)>')}document.getElementsByTagName("body")[0].innerHTML+='<p id="DEBUG"></p>';$("body").append('<div style="display: none; background-color: white; width:600px; color: #006; background-position:left top; background-repeat:no-repeat; position: absolute; right:0px; top:260px; border:3px solid blue; padding: 5px; z-index:200; margin-bottom: 50px;" id="feld_divbox"><div id="feld_boxhead"><h2><a onclick="bezar()" style="cursor: pointer; cursor: hand;">[X]</a> Export</h2><br><br></div>\  	<textarea id="feld_export" rows="10" cols="75"></textarea><br>\  	C&amp;C Műhely ~ cncDAni2<div style="height: 50px; margin: 0 0 -50px 0; background:transparent;"></div>')} catch (e) {alert(e)}}function f(a){try {var Z=document.getElementById("sereg"),_a=1,_a=0,_c=0,X=document.getElementById("production_table").rows,_d=Array(0,0,0,0,0,0,0,0,0,0),_e=Array(0,0,0,0,0,0,0,0,0,0),_f=_d[0]+_d[1]+_d[2]+_d[3]+2*_d[4]+4*_d[5]+5*_d[6]+6*_d[7]+5*_d[8]+8*_d[9],_g=_d[0]+_d[1]+_d[2]+_d[3]+4*_d[5]+5*_d[6]+6*_d[7]+5*_d[8];document.getElementById("tav");Z.innerHTML+="<p></p>";Z=Z.getElementsByTagName("p")[Z.getElementsByTagName("p").length-1];Z.innerHTML=`<b>${a} szektor</b> (`;for(var i=1;i<X.length;i++){if($.trim(X[i].cells[0].textContent.split(/\(\d+(\|)\d+\)/g)[0])!=a)continue;_c++;for(var j=0+_a;j<10+_a;j++)_d[j-_a]+=parseInt(X[i].cells[j+1].innerHTML);for(var j=0+_a;j<10+_a;j++)_e[j-_a]+=parseInt(X[i].cells[j+11].innerHTML)}Z.innerHTML+=_c+' falu) <a onclick="feld_save(this.parentNode);">Mentés</a><br>Itthon: '+_d+"<br>Össz: "+_e+"<br>1 faluja jutó sereg (nl=6,...): ";Z.innerHTML+=Math.round(parseInt(_f)/_c)+"<br>...kém/kata nélkül: ";Z.innerHTML+=Math.round(parseInt(_g)/_c)+"<br>Sereg tanyaszámban: ";_g=_e[0]+_e[1]+_e[2]+_e[3]+2*_e[4]+4*_e[5]+5*_e[6]+6*_e[7]+5*_e[8]+8*_e[9];Z.innerHTML+=_f+"/"+_g+" ("+Math.round((_f/_g).toFixed(2)*100)+"%)"} catch (e) {alert(`Auto szektorlétrehozó kiírói hiba:
${e}`)}}function g(){try {var _a=Array(),X=document.getElementById("production_table").rows;for(var i=1;i<X.length;i++)_a[i-1]=$.trim(X[i].cells[0].textContent.split(/\(\d+(\|)\d+\)/g)[0]);for(var i=0;i<_a.length;i++){if(_a[i]=="")continue;var _c=0,_d=_a[i];for(var j=i;j<_a.length;j++)_d==_a[j]&&(_a[j]="",_c++);_c>7&&f(_d)}return} catch (e) {alert(`Auto szektorlétrehozó hiba:
${e}`)}}function h(_a){var _c=`${_a}`,_d="",j=1,_e="";for(var i=_c.length-1;i>=0;i--){!(j%3)?_d+=_c[i]+" ":_d+=_c[i];j++}for(var i=_d.length-1;i>=0;i--)_e+=_d[i];return _e}function i(){try {var Z=document.getElementById("sereg"),_a=1,_a=0;document.getElementById("tav");if(Z.innerHTML==""){for(var i=0;i<RefArray.length;i++)RefArray[i].window.close();Z.innerHTML='<a href="javascript:recalc()">Frissítés a jelenleg kiválaszott csoportra</a> | <a href="javascript:save_all()">Összes csoport exportálása</a> | <a href="javascript: details(\'bent\')">Falunkénti exportálás</a>';Z.innerHTML+="<p></p>";Z=Z.getElementsByTagName("p")[0];Z.innerHTML='<b>Összes elemzett</b> (';var X=document.getElementById("production_table").rows,_c=Array(0,0,0,0,0,0,0,0,0,0),_d=Array(0,0,0,0,0,0,0,0,0,0),_e=_c[0]+_c[1]+_c[2]+_c[3]+2*_c[4]+4*_c[5]+5*_c[6]+6*_c[7]+5*_c[8]+8*_c[9],_f=_c[0]+_c[1]+_c[2]+_c[3]+4*_c[5]+5*_c[6]+6*_c[7]+5*_c[8],_g=document.createElement("div"),_h=document.getElementById("content_value");Z.innerHTML+=X.length-1+' falu) <a onclick="feld_save(this.parentNode);">Mentés</a><br>Itthon: ';for(var i=1;i<X.length;i++){for(var j=0+_a;j<10+_a;j++)_c[j-_a]+=parseInt(X[i].cells[j+1].innerHTML);for(var j=0+_a;j<10+_a;j++)_d[j-_a]+=parseInt(X[i].cells[j+11].innerHTML)}Z.innerHTML+=_c+"<br>Össz: "+_d+"<br>1 faluja jutó sereg (nl=6,...): ";Z.innerHTML+=Math.round(parseInt(_e)/X.length)+"<br>...kém/kata nélkül: ";Z.innerHTML+=Math.round(parseInt(_f)/X.length)+"<br>Sereg tanyaszámban: ";_f=_d[0]+_d[1]+_d[2]+_d[3]+2*_d[4]+4*_d[5]+5*_d[6]+6*_d[7]+5*_d[8]+8*_d[9];Z.innerHTML+=_e+"/"+_f+" ("+Math.round((_e/_f).toFixed(2)*100)+"%)";_g.setAttribute("align","center");_g.innerHTML='<br>Seregszűrés: <a href="javascript: Auto_csop(\'all\');">Mind</a>|<a href="javascript: Auto_csop(\'ures\');">Üres</a>|<a href="javascript: Auto_csop(\'tamad\');">Támadók</a>|<a href="javascript: Auto_csop(\'vedo\');">Védők</a>|<a href="javascript: Auto_csop(\'kem\');">2000+ kém</a>|<a href="javascript: Auto_csop(\'kata\');">1000+ katapult</a>|<a href="javascript: Auto_csop(\'vegyes\');">Vegyes</a>|<a href="javascript: Auto_csop(\'itthon\');">Itthon lévők</a>|<a href="javascript: Auto_csop(\'fok\');">Több, mint ?? egység</a>';_h.insertBefore(_g,_h.childNodes[1]);g()}else{a=prompt("Ezen csoport neve?","új");if(a==null)return;Z.innerHTML+="<p></p>";Z=Z.getElementsByTagName("p")[Z.getElementsByTagName("p").length-1];Z.innerHTML=`<b>${a}</b> (`;var _i=0,X=document.getElementById("production_table").rows,_c=Array(0,0,0,0,0,0,0,0,0,0),_d=Array(0,0,0,0,0,0,0,0,0,0),_e=_c[0]+_c[1]+_c[2]+_c[3]+2*_c[4]+4*_c[5]+5*_c[6]+6*_c[7]+5*_c[8]+8*_c[9],_f=_c[0]+_c[1]+_c[2]+_c[3]+4*_c[5]+5*_c[6]+6*_c[7]+5*_c[8];for(var i=1;i<X.length;i++){if(X[i].style.display=="none")continue;_i++;for(var j=0+_a;j<10+_a;j++)_c[j-_a]+=parseInt(X[i].cells[j+1].innerHTML);for(var j=0+_a;j<10+_a;j++)_d[j-_a]+=parseInt(X[i].cells[j+11].innerHTML)}Z.innerHTML+=_i+' falu) <a onclick="feld_save(this.parentNode);">Mentés</a><br>Itthon: '+_c+"<br>Össz: "+_d+"<br>1 faluja jutó sereg (nl=6,...): ";Z.innerHTML+=Math.round(parseInt(_e)/_i)+"<br>...kém/kata nélkül: ";Z.innerHTML+=Math.round(parseInt(_f)/_i)+"<br>Sereg tanyaszámban: ";_f=_d[0]+_d[1]+_d[2]+_d[3]+2*_d[4]+4*_d[5]+5*_d[6]+6*_d[7]+5*_d[8]+8*_d[9];Z.innerHTML+=_e+"/"+_f+" ("+Math.round((_e/_f).toFixed(2)*100)+"%)"}} catch (e) {alert(`Hiba újraszámításkor:
${e}`)}}function j(){var _a=-1;for(var i=0;i<FALUK.length;i++)if(FALUK[i]&&FELDOLG.indexOf(FALUK[i])==-1){_a=i;break}return _a}function k(_a){try {if(!RefArray[_a].document.getElementById("serverTime"))return!1;if((WAIT[_a]==10)){FELDOLG[_a]=0;return!1}if(RefArray[_a].document.getElementById('bot_check')||RefArray[_a].document.title=="Bot védelem"){d=!0;return!1}if(RefArray[_a].game_data.village.id!=FELDOLG[_a])return!1;var X=document.getElementById("production_table").rows,_c=Array(0,0,0,0,0,0,0,0,0,0),_d=Array(0,0,0,0,0,0,0,0,0,0),Z=RefArray[_a].document.getElementById("train_form").getElementsByTagName("table")[0].rows,_f=0,_g=0,_j=0;for(var i=1;i<Z.length-1;i++){var _e=Z[i].cells[0].getElementsByTagName("img")[0].src.match(/[a-z]+\.png/g)[0].replace(".png","");switch(_e) {case "spear":_c[0]=Z[i].cells[2].innerText.split("/")[0];_d[0]=Z[i].cells[2].innerText.split("/")[1];break;case "sword":_c[1]=Z[i].cells[2].innerText.split("/")[0];_d[1]=Z[i].cells[2].innerText.split("/")[1];break;case "axe":_c[2]=Z[i].cells[2].innerText.split("/")[0];_d[2]=Z[i].cells[2].innerText.split("/")[1];break;case "archer":_c[3]=Z[i].cells[2].innerText.split("/")[0];_d[3]=Z[i].cells[2].innerText.split("/")[1];break;case "spy":_c[4]=Z[i].cells[2].innerText.split("/")[0];_d[4]=Z[i].cells[2].innerText.split("/")[1];break;case "light":_c[5]=Z[i].cells[2].innerText.split("/")[0];_d[5]=Z[i].cells[2].innerText.split("/")[1];break;case "marcher":_c[6]=Z[i].cells[2].innerText.split("/")[0];_d[6]=Z[i].cells[2].innerText.split("/")[1];break;case "heavy":_c[7]=Z[i].cells[2].innerText.split("/")[0];_d[7]=Z[i].cells[2].innerText.split("/")[1];break;case "ram":_c[8]=Z[i].cells[2].innerText.split("/")[0];_d[8]=Z[i].cells[2].innerText.split("/")[1];break;case "catapult":_c[9]=Z[i].cells[2].innerText.split("/")[0];_d[9]=Z[i].cells[2].innerText.split("/")[1];break;default:alert(`${_e} - nincs ilyen`)}}try {var _h=RefArray[_a].document.getElementById("trainqueue_wrap_barracks").getElementsByTagName("table")[0].rows,_i=2;if(_h.length==2){}else _i=_h.length-1;for(var i=1;i<_i;i++)_f+=parseInt(_h[i].cells[1].innerText.split(":")[0],10)*60+parseInt(_h[i].cells[1].innerText.split(":")[1],10)} catch {}try {_h=RefArray[_a].document.getElementById("trainqueue_wrap_stable").getElementsByTagName("table")[0].rows;if(_h.length==2)var _i=2else _i=_h.length-1;for(var i=1;i<_i;i++)_g+=parseInt(_h[i].cells[1].innerText.split(":")[0],10)*60+parseInt(_h[i].cells[1].innerText.split(":")[1],10);_f<_g&&(_f=_g);_g=0} catch {}try {_h=RefArray[_a].document.getElementById("trainqueue_wrap_garage").getElementsByTagName("table")[0].rows;if(_h.length==2)var _i=2else _i=_h.length-1;for(var i=1;i<_i;i++)_g+=parseInt(_h[i].cells[1].innerText.split(":")[0],10)*60+parseInt(_h[i].cells[1].innerText.split(":")[1],10);_f<_g&&(_f=_g)} catch {}document.getElementById("tav")&&(_j=1);for(var i=1;i<X.length;i++)if(X[i].cells[0].getElementsByTagName("a")[0].href.match(/village=\d+/g)[0].replace("village=","")==RefArray[_a].game_data.village.id){for(var j=0;j<10;j++){X[i].cells[j+1+_j].innerHTML=_c[j];X[i].cells[j+11+_j].innerHTML=_d[j]}X[i].cells[X[i].cells.length-2].innerHTML=_f;break}FALUK[FALUK.indexOf(RefArray[_a].game_data.village.id)]=0;return!0} catch (e) {alert(`Számol: ${e}`)}return!1}function l(){try {if(!d){var _a=200,_c=j(),_d=!1;if(_c==-1){var _e=!0;for(var i=0;i<FELDOLG.length;i++)if(FELDOLG[i]&&FELDOLG[i]!=""&&FELDOLG[i]!=void 0){_e=!1;break}if(_e){i();return}FELDOLG[a]&&FELDOLG[a]!=""&&FELDOLG[a]!=void 0&&(_d=!0)}if(_d&&(RefArray[a].closed||RefArray[a]==void 0)){RefArray[a]=window.open(c+"village="+FALUK[_c]+"&screen=train",`sereg_${a}`);FELDOLG[a]=FALUK[_c]}else ((RefArray[a]==void 0)||RefArray[a].closed||(RefArray[a].location.href.indexOf("&screen=train")==-1)||!WAIT[a])&&(_c!=-1)&&(RefArray[a]=window.open(c+"village="+FALUK[_c]+"&screen=train",`sereg_${a}`),FELDOLG[a]=FALUK[_c]);k(a,_c)?(FELDOLG[a]=0,_c=j(),_c!=-1&&(RefArray[a]=window.open(c+"village="+FALUK[_c]+"&screen=train",`sereg_${a}`),FELDOLG[a]=FALUK[_c]),WAIT[a]=0):(WAIT[a]++,WAIT[a]>10&&(RefArray[a].window.close(),WAIT[a]=0))}else var _a=5000} catch (e) {alert(e)}a++;a>N&&(a=0);_a=Math.round(_a*((Math.random()*0.5)+0.5));setTimeout("eloszto()",200)}$(document).ready(()=>$(()=>$("#feld_divbox").draggable({handle:$('#feld_boxhead')})));void 0;

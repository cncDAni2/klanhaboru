var LVL_MAXRIX_1=[0,2,2,2,3,3,3,3,3,4,4,4,5,5,6,6,6,7,8,8,9,10,10,11,12,13,15,16,17,19,20],PLUSLEVEL=1,IGNORE_LIST=["Gyülekezőhely","Szobor","Fatelep","Agyagbánya","Vasbánya","Raktár","Rejtekhely","Rally point","Statue","Timber camp","Clay pit","Iron mine","Warehouse","Hiding place"];function setCookie(t,e){localStorage.setItem(t,e)}function getCookie(t){return localStorage.getItem(t)}function report_learning(){let t=document.getElementById("attack_spy_buildings_left");if(!t)return void alert("Nincs felderített épületszint");let e={};for(let n=1;n<t.rows.length;n++)e[t.rows[n].cells[0].textContent.trim()]=parseInt(t.rows[n].cells[1].textContent);let n=document.getElementById("attack_spy_buildings_right");if(n)for(let t=1;t<n.rows.length;t++)e[n.rows[t].cells[0].textContent.trim()]=parseInt(n.rows[t].cells[1].textContent);let l=document.getElementById("attack_info_def").rows[1].textContent.match(/[0-9]+\|[0-9]+/);setCookie("cnc_katapult",`;${l[l.length-1]};${JSON.stringify(e)}`),alert(`Megtanulva +${PLUSLEVEL}lvl mode`)}function tamadas_OK(){let t=getCookie("cnc_katapult").split(";"),e=JSON.parse(t[2]),n=getNextTarget(e),l=document.getElementById("command-data-form");for(let t=0;t<l.building.options.length;t++){const e=l.building.options[t];if(e.text===n.target){e.selected=!0;break}}e[n.target]-=1,setCookie("cnc_katapult",`;${t[1]};${JSON.stringify(e)}`),l.submit_confirm.click()}function send_units(){if(document.location.href.includes("try=confirm"))return void tamadas_OK();let t=getCookie("cnc_katapult").split(";"),e=document.getElementById("command-data-form");e.input.value=t[1];let n=getNextTarget(JSON.parse(t[2]));n?(e.catapult.value=LVL_MAXRIX_1[n.level+PLUSLEVEL],e.attack.click()):alert("VÉGE")}function getNextTarget(t){for(let e in t)if(""!=e){if(!IGNORE_LIST.includes(e)&&!(("Főhadiszállás"==e||"Headquarters"==e)&&t[e]<=1||("Tanya"==e||"Farm"==e)&&t[e]<=6||0==t[e]))return{target:e,level:t[e]}}else delete t[e]}document.location.href.includes("screen=report")&&report_learning(),document.location.href.includes("screen=place")&&send_units();
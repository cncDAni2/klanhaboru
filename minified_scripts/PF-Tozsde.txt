var REF,STATUS=1,HIBA=0,AUTO_STATUS=0,IFRAME=!1,NEWMAIL=0,TOZSDE_SOUNDS=["bot2.wav","BOMB_SIREN_hosszu.mp3","Intruder_alert.mp3","alarm-frenzy.mp3","bogyo_mese_hosszu.mp3","bubbling-up.mp3","capisci.mp3","decay.mp3","determined.mp3","hell-yeah.mp3","lovely.mp3","may-i-have-your-attention.mp3","nasty-error-long.mp3","nice-cut.mp3","oh-finally.mp3","on-serious-matters.mp3","system-fault.mp3","thats-nasty.mp3"],BELL={};document.body.style.backgroundImage="none",document.body.style.background="#e3d5b3 url(https://dshu.innogamescdn.com/asset/233cdec1/graphic/index/main_bg.jpg) scroll right top repeat";var BOT,BOTTIME,ID=game_data.world+" - K"+(game_data.village.y+"")[0]+(game_data.village.x+"")[0],CHK_FIELDS=["minimum","maximum","any","some","action","keszlet","autotrans","newMail","newAttack"],FIELDS=["min_wood","min_stone","min_iron","max_wood","max_stone","max_iron","action_wood","action_stone","action_iron","keszlet_wood","keszlet_stone","keszlet_iron","nameOfBeerkezo","nameOfElad","nameOfVasarolj"],LANGFIELDS=[],AUTO_FIELDS_SELL=["minRes","minLimit","maxRes","maxLimit"],AUTO_FIELDS_BUY=["minRes","minLimit","maxRes","maxLimit"],ISLOGIN=!0,STATS={min:[9999,9999,9999],max:[0,0,0],avg:[0,0,0,0],lastStat:new Date,autoSell:[0,0,0,0],autoBuy:[0,0,0,0]},SOUND_LOC="https://raw.githubusercontent.com/cncDAni2/klanhaboru/main/images/szem4/",defaultSound="bot2.wav",TOZSDE_DATA={},TOZSDE_DATA_DEFAULT={minimum:!0,maximum:!1,any:!1,some:!1,min_wood:500,min_stone:500,min_iron:500,max_wood:1500,max_stone:1500,max_iron:1500,action:!0,action_wood:20,action_stone:20,action_iron:20,keszlet:!1,keszlet_wood:1e3,keszlet_stone:1e3,keszlet_iron:1e3,autotrans:!0,newMail:!1,newAttack:!0,nameOfBeerkezo:"Beérkező",nameOfElad:"Elad",nameOfVasarolj:"Vásárolj",sound:{minimum:defaultSound,maximum:defaultSound,any:defaultSound,some:defaultSound,action:defaultSound,keszlet:defaultSound,autotrans:defaultSound,newMail:defaultSound,newAttack:defaultSound}},EVENT={hangSzunet:new Date,lastResult:[0,0,0],lastChange:new Date,noSoundIf:!0,agressiveRefresh:!1,agressiveRefreshTime:0},TOZSDE_AUTO={wood:{sell:{},buy:{}},stone:{sell:{},buy:{}},iron:{sell:{},buy:{}}},ISTOZSDE_AUTO={wood:{},stone:{},iron:{}},TOZSDE_AUTOINFO={inProgress:!1,startProgress:new Date,mode:"",type:"",ppValue:0,sellValue:0,minMaxPrice:0,isError:!1,lastSuccess:new Date},INCOMING=0,LINK=window.location.href.split("village=");LINK=LINK[0]+"village="+game_data.village.id+"&screen=market&mode=exchange";var worker=createWorker((function(e){e.addEventListener("message",(function(e){setTimeout((function(){postMessage("")}),e.data)}),!1)}));function createWorker(e){var t=new Blob(["("+e.toString()+")(self)"],{type:"text/javascript"});return new Worker(window.URL.createObjectURL(t))}function generateSoundSelector(e){for(var t="<select onchange=\"changeSound(this, '"+e+'\')" name="'+e+'_sound">',n=0;n<TOZSDE_SOUNDS.length;n++)t+='<option value="'+TOZSDE_SOUNDS[n]+'">'+TOZSDE_SOUNDS[n].split(".")[0]+"</option>";return t+='</select><button type="button" onclick="csengess(\''+e+"')\">&#9654;</button>"}function generateAutoOptions(e){for(var t=["wood","stone","iron"],n='<div class="autoChk">',a=0;a<t.length;a++)n+='<span class="icon header '+t[a]+'"> </span> <input type="checkbox" onclick="stopStartAuto(this,\''+e+"', '"+t[a]+"')\"><br>";return n+="</div>"}function generatePlusMinus(e,t){return'<button type="button" class="plusminusbutton" onclick="changeLimits(\''+e+"', '"+t+'\', 25)">+</button>\t\t\t<button type="button" class="plusminusbutton" onclick="changeLimits(\''+e+"', '"+t+"', -25)\">-</button>"}function changeLimits(e,t,n){for(var a,o=document.getElementById("cnc_tozsde"),s=["wood","stone","iron"],r={},i={},l=0;l<3;l++)if(r={minL:"auto_"+e+"_"+s[l]+"_minLimit",minR:"auto_"+e+"_"+s[l]+"_minRes",maxL:"auto_"+e+"_"+s[l]+"_maxLimit",maxR:"auto_"+e+"_"+s[l]+"_maxRes"},(i={minL:parseInt(o[r.minL].value),minR:parseInt(o[r.minR].value),maxL:parseInt(o[r.maxL].value),maxR:parseInt(o[r.maxR].value)}).maxL!=i.minL){if((a=(i.maxR-i.minR)/(i.maxL-i.minL))<0)return void alert("Helytelen automata megadás");parseInt(o["auto_"+e+"_"+s[l]+"_"+t].value)<25?UI.InfoMessage("Nem csökkenthető tovább ("+s[l]+")",5e3):("minLimit"==t&&(i.minL+=n,i.minL<0&&(i.minL=0),i.minR+=Math.round(n*a),i.minR<0&&(i.minR=0),$("#tozsde_auto input[name="+r.minL+"]").val(i.minL).change(),$("#tozsde_auto input[name="+r.minR+"]").val(i.minR).change()),"maxLimit"==t&&(i.maxL+=n,i.maxL<0&&(i.maxL=0),i.maxR+=Math.round(n*a),i.maxR<0&&(i.maxR=0),$("#tozsde_auto input[name="+r.maxL+"]").val(i.maxL).change(),$("#tozsde_auto input[name="+r.maxR+"]").val(i.maxR).change()))}else UI.InfoMessage("Nem állítható tovább ("+s[l]+")",5e3)}function hangero(e){for(var t in BELL)-20==e&&BELL[t].volume>=.2&&(BELL[t].volume-=.2),20==e&&BELL[t].volume<=.8&&(BELL[t].volume+=.2);document.getElementById("hangero").getElementsByTagName("p")[0].innerHTML=Math.round(100*BELL.bot.volume)+"%",BELL.bot.play()}function stopSound(e){EVENT.hangSzunet=new Date;var t=document.getElementById("stopSoundTime");if("Hang visszakapcsolása"==e.innerHTML)e.innerHTML="Hangszünet",t.innerHTML="",clearTimeout(EVENT.hangSzunetTIME);else{document.getElementById("stoptime").value=document.getElementById("stoptime").value.match(/[0-9]+/g)[0];var n=document.getElementById("stoptime").value;if(""==n)return;n=parseInt(n,10),EVENT.hangSzunet.setMinutes(EVENT.hangSzunet.getMinutes()+n),e.innerHTML="Hang visszakapcsolása",t.innerHTML="Hang visszakapcsolása ekkor: "+prettyDatePrint(EVENT.hangSzunet),EVENT.hangSzunetTIME=setTimeout((function(){e.innerHTML="Hangszünet",document.getElementById("stopSoundTime").innerHTML=""}),6e4*n)}}function stopSoundIf(e){EVENT.noSoundIf=e.checked}function setAgressiveRefresh(e){EVENT.agressiveRefresh=e.checked}function setTabVisibility(e,t){var n=document.getElementById(e);"none"==n.style.display?(n.style.display="block",t.classList.contains("openedH3")||t.classList.add("openedH3")):(n.style.display="none",t.classList.remove("openedH3"))}function changeSound(e,t){var n=BELL.bot.volume;TOZSDE_DATA.sound[t]=e.value,BELL[t]=new Audio(SOUND_LOC+e.value),BELL[t].volume=n,setTimeout((function(){4==BELL[t].readyState?(addEvent("&#9432; Hangváltás sikeres","info"),BELL[t].play()):addEvent("&#9432; Probléma adódott a hang váltásával","info")}),1e3)}function copyAuto(e){if(confirm("Szeretné az ehhez tartozó automata beállításokat a többi nyersanyaghoz is átmásolni?"))for(var t,n,a=document.getElementById("tozsde_auto").rows,o=1;o<a.length;o++)t=(n=$(a[o]).find("input[type=number]"))[e].value,n.val(t).change()}function addEvent(e,t){try{var n,a=document.getElementById("allapot").getElementsByTagName("tbody")[0].insertRow(0);if(a.insertCell(0).innerHTML=prettyDatePrint(new Date),t)(n=a.insertCell(1)).setAttribute("colspan","7"),n.innerHTML=e,n.setAttribute("class","item-"+t);else{for(var o=1;o<4;o++)(n=a.insertCell(o)).innerHTML=s(e[2][o-1])+" "+e[0][o-1];for(o=4;o<7;o++)(n=a.insertCell(o)).innerHTML=e[3][o-4];(n=a.insertCell(7)).innerHTML=e[1].join("<br>")}function s(e){switch(e){case"+":return'<font style="color: red">&mapstoup;</font>';case"-":return'<font style="color: #99F">&DownTeeArrow;</font>';case"=":return'<font style="color: white; opacity: 0.5">&LeftArrowRightArrow;</font>';default:return"?"}}}catch(r){console.info("AddEvent error:",r)}}function BotvedelemBe(){BOT=!0,addEvent('BOT VÉDELEM AKTÍV! <a href="javascript:BotvedelemKi();" style="color: #66D;">Kattints ide a ha beírtad a kódot.</a>',"info"),csengess("bot"),BOTTIME=setInterval((function(){if(void 0!==window.URL){var e=createWorker((function(e){e.addEventListener("message",(function(e){postMessage("")}),!1)}));e.onmessage=function(e){csengess("bot")},e.postMessage({})}else csengess("bot")}),2500)}function BotvedelemKi(){0!=BOT&&(BELL.bot.pause(),addEvent("Bot védelem rendben.","info"),BOT=!1,clearInterval(BOTTIME))}function isPageLoaded(e){try{if(e.closed)return STATUS=1,!1;try{e.status}catch(e){return csengess("bot"),ISLOGIN&&(addEvent("A rendszer vélhetőleg kiléptette","info"),ISLOGIN=!1),!1}return ISLOGIN=!0,"complete"===e.document.readyState&&(e.document.getElementById("bot_check")||e.document.getElementById("popup_box_bot_protection")||"Bot védelem"==e.document.title||e.document.location.href.indexOf("sid_wrong")>-1?(BotvedelemBe(),!1):-1==e.document.location.href.indexOf("exchange")?(STATUS=1,!1):!(e.document.getElementById("serverTime").innerHTML.length<4)&&!(!e.PremiumExchange||!e.document.getElementById("premium_exchange_form")))}catch(e){return!1}return!1}function stopStartAuto(e,t,n){ISTOZSDE_AUTO[n][t]=e.checked}function saveAuto(){var e,t=document.getElementById("cnc_tozsde"),n=["wood","stone","iron"];TOZSDE_AUTO={wood:{sell:{},buy:{}},stone:{sell:{},buy:{}},iron:{sell:{},buy:{}},left_merch:0};for(var a=0;a<n.length;a++)for(var o=0;o<AUTO_FIELDS_SELL.length;o++)e=t["auto_sell_"+n[a]+"_"+AUTO_FIELDS_SELL[o]],TOZSDE_AUTO[n[a]].sell[AUTO_FIELDS_SELL[o]]=parseInt(e.value,10);for(a=0;a<n.length;a++)for(o=0;o<AUTO_FIELDS_BUY.length;o++)e=t["auto_buy_"+n[a]+"_"+AUTO_FIELDS_BUY[o]],TOZSDE_AUTO[n[a]].buy[AUTO_FIELDS_BUY[o]]=parseInt(e.value,10);TOZSDE_AUTO.left_merch=parseInt(t.left_merch.value,10),localStorage.setItem("PF_tozsde_Auto"+ID,JSON.stringify(TOZSDE_AUTO)),setButtonBack("auto_save")}function saveTozsdeData(){var e=document.getElementById("cnc_tozsde");TOZSDE_DATA={sound:{}};for(var t=0;t<CHK_FIELDS.length;t++)TOZSDE_DATA[CHK_FIELDS[t]]=e[CHK_FIELDS[t]].checked,TOZSDE_DATA.sound[CHK_FIELDS[t]]=e[CHK_FIELDS[t]+"_sound"].value;TOZSDE_DATA.sound.bot=e.bot_sound.value;for(t=0;t<FIELDS.length;t++)-1==FIELDS[t].indexOf("nameOf")&&(e[FIELDS[t]].value=e[FIELDS[t]].value.replace(/[^0-9]/g,"")),""==e[FIELDS[t]].value&&(e[FIELDS[t]].value=TOZSDE_DATA_DEFAULT[FIELDS[t]]),-1==FIELDS[t].indexOf("nameOf")?TOZSDE_DATA[FIELDS[t]]=parseInt(e[FIELDS[t]].value,10):TOZSDE_DATA[FIELDS[t]]=e[FIELDS[t]].value;localStorage.setItem("PF_tozsde"+ID,JSON.stringify(TOZSDE_DATA)),isPageLoaded(REF)&&putQuickButtons(),setButtonBack("tozsde_save")}function setButtonBack(e){var t=document.getElementById(e);t.disabled=!0,t.innerHTML=t.innerHTML.replace("*","")}function loadData(){try{TOZSDE_DATA=JSON.parse(localStorage.getItem("PF_tozsde"+ID))}catch(e){TOZSDE_DATA=null}var e=document.getElementById("cnc_tozsde");TOZSDE_DATA&&null!=TOZSDE_DATA||(TOZSDE_DATA=JSON.parse(JSON.stringify(TOZSDE_DATA_DEFAULT)));for(var t=0;t<CHK_FIELDS.length;t++)e[CHK_FIELDS[t]].checked=TOZSDE_DATA[CHK_FIELDS[t]];for(t=0;t<FIELDS.length;t++)e[FIELDS[t]].value=TOZSDE_DATA[FIELDS[t]]||TOZSDE_DATA_DEFAULT[FIELDS[t]];try{TOZSDE_AUTO=JSON.parse(localStorage.getItem("PF_tozsde_Auto"+ID))}catch(e){TOZSDE_AUTO=null}if(TOZSDE_AUTO&&null!=TOZSDE_AUTO){for(t=0;t<AUTO_FIELDS_SELL.length;t++){e["auto_sell_wood_"+(n=AUTO_FIELDS_SELL[t])].value=TOZSDE_AUTO.wood.sell[n],e["auto_sell_stone_"+n].value=TOZSDE_AUTO.stone.sell[n],e["auto_sell_iron_"+n].value=TOZSDE_AUTO.iron.sell[n]}for(t=0;t<AUTO_FIELDS_BUY.length;t++){var n;e["auto_buy_wood_"+(n=AUTO_FIELDS_BUY[t])].value=TOZSDE_AUTO.wood.buy[n],e["auto_buy_stone_"+n].value=TOZSDE_AUTO.stone.buy[n],e["auto_buy_iron_"+n].value=TOZSDE_AUTO.iron.buy[n]}e.left_merch.value=TOZSDE_AUTO.left_merch||0,saveAuto()}else TOZSDE_AUTO={wood:{sell:{},buy:{}},stone:{sell:{},buy:{}},iron:{sell:{},buy:{}},left_merch:0};setButtonBack("tozsde_save"),setButtonBack("auto_save")}function loadSoundData(){var e,t=BELL.bot?BELL.bot.volume:1;TOZSDE_DATA.sound||(TOZSDE_DATA.sound=JSON.parse(JSON.stringify(TOZSDE_DATA_DEFAULT.sound)));var n=document.getElementById("cnc_tozsde");for(e in CHK_FIELDS)a(CHK_FIELDS[e]);function a(e){TOZSDE_DATA.sound[e]||(TOZSDE_DATA.sound[e]=defaultSound),n[e+"_sound"].value=TOZSDE_DATA.sound[e],BELL[e]=new Audio(SOUND_LOC+TOZSDE_DATA.sound[e]),BELL[e].volume=t}a("bot"),saveTozsdeData(),setTimeout((function(){var e=!1;for(var t in BELL)4!==BELL[t].readyState&&(e=!0,addEvent("&#9432; Probléma van a "+TOZSDE_DATA.sound[t].split(".")[0]+" hang betöltésével. Használd a hang újrabetöltését vagy a lejátszás gombot.","info"));e||addEvent("&#9432; Hangok sikeresen betölve.","info")}),3e3)}function prettyDatePrint(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)}function csengess(e){try{4==BELL[e].readyState?BELL[e].play():BELL[e].load()}catch(e){console.error("HIBA::Playsound",e)}}function updateStatistic(e,t){for(var n=new Date,a=(n-STATS.lastStat)/6e4,o=0;o<3;o++){if(e[o]<30)return;STATS.min[o]>e[o]&&(STATS.min[o]=e[o]),STATS.max[o]<e[o]&&(STATS.max[o]=e[o]),STATS.avg[o]=(STATS.avg[o]*STATS.avg[3]+t[o]*a)/(STATS.avg[3]+a)}STATS.avg[3]+=a,STATS.lastStat=n,function(){for(var e=document.getElementById("cnc_stats"),t=0;t<3;t++)e.rows[1].cells[t+1].innerHTML=STATS.min[t],e.rows[2].cells[t+1].innerHTML=STATS.max[t],e.rows[3].cells[t+1].innerHTML=Math.round(STATS.avg[t])}()}function updateAutoStatistic(e,t,n,a){var o=document.getElementById("cnc_stats"),s=0;"stone"==t&&(s=1),"iron"==t&&(s=2),"sell"==e?(STATS.autoSell[s]+=n,STATS.autoSell[3]+=a):(STATS.autoBuy[s]+=n,STATS.autoBuy[3]+=a);for(var r=0;r<4;r++)o.rows[4].cells[r+1].innerHTML=STATS.autoSell[r],o.rows[5].cells[r+1].innerHTML=STATS.autoBuy[r]}function getClearValue(e,t,n,a){if("sell"==n)for(var o=63;o<2e3&&!(r(e,-o,t)<=-1);o++);else for(o=63;o<2e3&&!(r(e,o,t)>=1);o++);var s=REF.PremiumExchange.data.capacity[e]-REF.PremiumExchange.data.stock[e];return a&&s>0&&o-1>s?s:o-1;function r(e,t,n){var a=REF.PremiumExchange.data.capacity[e];return(1+(0<=t?REF.PremiumExchange.data.tax.buy:REF.PremiumExchange.data.tax.sell))*(REF.PremiumExchange.calculateMarginalPrice(n,a)+REF.PremiumExchange.calculateMarginalPrice(n-t,a))*t/2}}function putQuickButtons(){try{for(var e=REF.document.getElementById("premium_exchange_form").getElementsByTagName("table")[0],t=[parseInt(e.rows[2].cells[1].innerText,10)-parseInt(e.rows[1].cells[1].innerText,10),parseInt(e.rows[2].cells[2].innerText,10)-parseInt(e.rows[1].cells[2].innerText,10),parseInt(e.rows[2].cells[3].innerText,10)-parseInt(e.rows[1].cells[3].innerText,10)],n=REF.PremiumExchange.data.merchants,a=[REF.game_data.village.wood,REF.game_data.village.stone,REF.game_data.village.iron],o=0;o<t.length;o++)t[o]>a[o]&&(t[o]=l(a[o],o)),t[o]>1e3*n&&(t[o]=l(1e3*n,o));if(e.classList.contains("cnc_transformed"))for(o=0;o<3;o++){r="";switch(o){case 0:r+="wood";break;case 1:r+="stone";break;case 2:r+="iron"}e.rows[5].cells[o+1].getElementsByTagName("button")[0].setAttribute("onclick",'setSellValue("'+r+'",'+d(o)+")"),e.rows[5].cells[o+1].getElementsByTagName("button")[1].setAttribute("onclick",'setValue("'+r+'",'+m(o)+")"),e.rows[5].cells[o+1].getElementsByTagName("button")[2].setAttribute("onclick",'setValue("'+r+'",'+t[o]+")")}else{var s=REF.document.createElement("script");s.innerHTML="function setValue(cellId, value) { $('#premium_exchange_sell_'+cellId+' input').val(value).keyup();\t}\t\t\t\t\t\t\t function setNull(cellId)   { $('#premium_exchange_sell_'+cellId+' input, #premium_exchange_buy_'+cellId+' input').val('').keyup(); }\t\t\t\t\t\t\t function setSellValue(cellId, value) { $('#premium_exchange_buy_'+cellId+' input').val(value).keyup(); }",REF.document.body.appendChild(s),e.rows[5].cells[1].style.position="relative",e.rows[5].cells[2].style.position="relative",e.rows[5].cells[3].style.position="relative";for(var o=0;o<3;o++){var r="";switch(o){case 0:r+="wood";break;case 1:r+="stone";break;case 2:r+="iron"}var i=REF.document.createElement("div");i.setAttribute("style","position: absolute; right: 0px; top: 20px;"),i.innerHTML='\t\t\t\t<button type="button" onclick="setSellValue(\''+r+"',"+d(o)+')" style="background: #F66">A</button>\t\t\t\t<button type="button" onclick="setValue(\''+r+"',"+m(o)+')">A</button><button type="button" onclick="setValue(\''+r+"',"+t[o]+')">Max</button><button type="button" style="background: linear-gradient(140deg, #eee 50%, #F66 51%,#F66 100%);" onclick="setNull(\''+r+"')\">X</button>",list=e.rows[5].cells[o+1].getElementsByClassName("cost-container")[0],list.insertBefore(i,list.childNodes[o])}}function l(t,n){n++;var a=parseInt(e.rows[1].cells[n].innerText,10)+t,o=parseInt(e.rows[2].cells[n].innerText,10),s=Math.floor(t-1/REF.PremiumExchange.calculateMarginalPrice(a,o));return s<0?0:s}function m(e){var t,o=0,s=1e3*n;switch(s>a[e]&&(s=a[e]),e){case 0:e="wood",o=TOZSDE_DATA.min_wood;break;case 1:e="stone",o=TOZSDE_DATA.min_stone;break;case 2:e="iron",o=TOZSDE_DATA.min_iron}var r=REF.PremiumExchange.data.stock[e],i=0;do{t=getClearValue(e,r,"sell"),i+=Math.floor(t),r+=Math.floor(t)}while(Math.round(t)<=o&&i<=s);return i-=Math.floor(t),Math.floor(i)}function d(e){var t;switch(e){case 0:e="wood",t=TOZSDE_DATA.max_wood;break;case 1:e="stone",t=TOZSDE_DATA.max_stone;break;case 2:e="iron",t=TOZSDE_DATA.max_iron}var n,a=REF.PremiumExchange.data.stock[e],o=0;do{n=getClearValue(e,a,"buy"),o+=Math.floor(n),a-=Math.floor(n)}while(Math.floor(n)>=t);return o-=Math.floor(n),Math.floor(o)}e.classList.add("cnc_transformed")}catch(u){console.error(u)}}function autoAdd(e,t,n,a){try{var o,s=REF.game_data.village[n],r=REF.document.getElementById("market_status_bar").getElementsByTagName("table");if(r.length>1&&(r=r[1].rows[0].cells)[0].innerText.indexOf(TOZSDE_DATA.nameOfBeerkezo)>-1){r=$(r[0]).find(">span");for(var i=0;i<r.length;i++)if("nowrap"==r[i].getAttribute("class")&&r[i].getElementsByTagName("span")[0].getAttribute("class").indexOf(n)>-1){s+=parseInt(r[i].innerText.replace(".",""));break}}return"sell"==a&&ISTOZSDE_AUTO[n].sell?!(e>(o=TOZSDE_AUTO[n].sell).maxLimit||1e3*(REF.PremiumExchange.data.merchants-TOZSDE_AUTO.left_merch)<t+e||REF.game_data.village[n]<t+e||s-t-e<o.minRes||REF.PremiumExchange.data.capacity[n]>=REF.PremiumExchange.data.stock[n])&&(REF.PremiumExchange.data.capacity[n]<REF.PremiumExchange.data.stock[n]+t+e?0==t&&REF.PremiumExchange.data.capacity[n]-(REF.PremiumExchange.data.stock[n]+t):e<o.minLimit||s-t>o.minRes+(e-o.minLimit)*((o.maxRes-o.minRes)/(o.maxLimit-o.minLimit))):!("buy"!=a||!ISTOZSDE_AUTO[n].buy)&&(!(e<(o=TOZSDE_AUTO[n].buy).minLimit||REF.PremiumExchange.data.stock[n]<t+e||s+t+e>=o.maxRes)&&(e>=o.maxLimit?s+t+e<o.maxRes:s+t<=o.minRes+(e-o.minLimit)*((o.maxRes-o.minRes)/(o.maxLimit-o.minLimit))))}catch(e){return console.error(e),!1}}function resetAutoState(){TOZSDE_AUTOINFO={inProgress:!1,startProgress:new Date,mode:"",type:"",ppValue:0,sellValue:0,minMaxPrice:0,isError:!1,lastSuccess:new Date},AUTO_STATUS=0,REF.location.reload()}function startAutoProcess(){var e,t,n,a=["wood","stone","iron"];if(TOZSDE_AUTOINFO.inProgress&&TOZSDE_AUTOINFO.isError){var o=parseInt(REF.document.getElementById("premium_exchange_form")[TOZSDE_AUTOINFO.mode+"_"+TOZSDE_AUTOINFO.type].value,10);if(o-=1.1*TOZSDE_AUTOINFO.minMaxPrice,isNaN(o)||o<=0)return void resetAutoState();REF.document.getElementById("premium_exchange_form")[mode+"_"+type].value=o,REF.$("#premium_exchange_form .btn.btn-premium-exchange-buy").click()}else for(var s=0;s<a.length;s++){if(t=REF.PremiumExchange.data.stock[a[s]],!0===(n=autoAdd(e=getClearValue(a[s],t,"sell",!0),0,a[s],"sell")))return void r(a[s],"sell",e);if("number"==typeof n&&n>0)return void r(a[s],"sell",n);if(autoAdd(e=getClearValue(a[s],t,"buy"),0,a[s],"buy"))return void r(a[s],"buy",e)}function r(e,t,n){for(var a,o=n,s=0,r=!0;r;)s+="number"==typeof r?r:o,a=o,r=autoAdd(o=getClearValue(e,"sell"==t?REF.PremiumExchange.data.stock[e]+s:REF.PremiumExchange.data.stock[e]-s,t),s,e,t);0!=s&&(TOZSDE_AUTOINFO.inProgress=!0,TOZSDE_AUTOINFO.startProgress=new Date,TOZSDE_AUTOINFO.mode=t,TOZSDE_AUTOINFO.type=e,TOZSDE_AUTOINFO.minMaxPrice=a,REF.document.getElementById("premium_exchange_form")[t+"_"+e].value=Math.floor(s),REF.$("#premium_exchange_form .btn.btn-premium-exchange-buy").click(),AUTO_STATUS=1)}}function checkTransactionPopup(){if(null!=REF.document.getElementById("premium_exchange")&&"none"!=REF.document.getElementById("fader").style.display){var e=REF.document.getElementById("confirmation-msg").getElementsByTagName("table")[0].rows[1].cells[1].innerText.match(/[0-9]+/g);switch(e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10),TOZSDE_AUTOINFO.mode){case"sell":if(TOZSDE_AUTOINFO.minMaxPrice<e[0]/e[1]*.97)return console.info("Hiba, végső ár nem jó",e[0]/e[1]*.97,TOZSDE_AUTOINFO.minMaxPrice),void resetAutoState();break;case"buy":if(TOZSDE_AUTOINFO.minMaxPrice>e[0]/e[1]*1.03)return console.info("Hiba, végső ár nem jó",e[0]/e[1]*1.03,TOZSDE_AUTOINFO.minMaxPrice),void resetAutoState()}TOZSDE_AUTOINFO.sellValue=e[0],TOZSDE_AUTOINFO.ppValue=e[1],REF.document.getElementById("premium_exchange").getElementsByClassName("btn-confirm-yes")[0].click(),AUTO_STATUS=2}else new Date-TOZSDE_AUTOINFO.startProgress<5e3?REF.$("#premium_exchange_form .btn.btn-premium-exchange-buy").click():(console.info("WTF-error: Nem jelenik meg a lightbox"),resetAutoState())}function checkSuccessfulTransaction(){var e=REF.document.getElementById("confirmation-msg");"none"==REF.document.getElementById("fader").style.display?(addEvent("Automata "+("sell"==TOZSDE_AUTOINFO.mode?"eladás":"vásárlás")+": "+TOZSDE_AUTOINFO.sellValue+'<span class="icon header '+TOZSDE_AUTOINFO.type+'"> </span> &LeftArrowRightArrow; '+TOZSDE_AUTOINFO.ppValue+'<span class="icon header premium"> </span> (Átlagár: '+Math.round(TOZSDE_AUTOINFO.sellValue/TOZSDE_AUTOINFO.ppValue)+")",TOZSDE_AUTOINFO.mode),updateAutoStatistic(TOZSDE_AUTOINFO.mode,TOZSDE_AUTOINFO.type,TOZSDE_AUTOINFO.sellValue,TOZSDE_AUTOINFO.ppValue),AUTO_STATUS=0,TOZSDE_DATA.autotrans&&csengess("autotrans"),resetAutoState(),TOZSDE_AUTOINFO.lastSuccess=new Date):e.getElementsByClassName("error").length>0?(TOZSDE_AUTOINFO.isError=!0,REF.document.getElementById("premium_exchange").getElementsByClassName("btn-confirm-no")[0].click(),console.info("Error, nem teljesíthető a parancs mert ",e.getElementById("confirmation-msg").innerHTML),REF.location.reload(),AUTO_STATUS=0):e.getElementsByClassName("warn").length>0?checkTransactionPopup():(TOZSDE_AUTOINFO.isError=!1,console.info("Lehetetlen esemény: ",REF.document.getElementById("confirmation-msg").innerHTML))}function iframeOperation(e){if(IFRAME){if("open"===e)document.getElementById("tozsde_iframe").src=LINK,REF=document.getElementById("tozsde_iframe").contentWindow}else if("open"===e)REF=window.open(LINK,"PF_tozsde_"+ID)}function transformPage(){try{var e=REF.document.getElementById("confirmation-msg"),t="",n=!1;if(e&&null!==e){e.classList.contains("cnc_transformed")?n=!0:e.classList.add("cnc_transformed");var a=e.getElementsByTagName("table")[0].rows[1].cells[1],o=a.innerText.match(/[0-9]+/g);return o=Math.round(parseInt(o[0],10)/parseInt(o[1],10)),a.innerText.indexOf(TOZSDE_DATA.nameOfElad)>-1&&(t=a.getElementsByTagName("img")[0].src.indexOf("wood")>-1&&o<=TOZSDE_DATA.min_wood||a.getElementsByTagName("img")[0].src.indexOf("stone")>-1&&o<=TOZSDE_DATA.min_stone||a.getElementsByTagName("img")[0].src.indexOf("iron")>-1&&o<=TOZSDE_DATA.min_iron?"✔":"X"),a.innerText.indexOf(TOZSDE_DATA.nameOfVasarolj)>-1&&(t=a.getElementsByTagName("img")[0].src.indexOf("wood")>-1&&o>=TOZSDE_DATA.max_wood||a.getElementsByTagName("img")[0].src.indexOf("stone")>-1&&o>=TOZSDE_DATA.max_stone||a.getElementsByTagName("img")[0].src.indexOf("iron")>-1&&o>=TOZSDE_DATA.max_iron?"✔":"X"),n||(e.getElementsByTagName("p")[0].innerHTML+="<br><b>Arány: 1 pp = "+o+" nyers "+t+"</b>"),o}return null}catch(e){console.error(e)}}function tozsdekereses(){try{var e=!1,t="",n=[parseInt(REF.document.getElementById("premium_exchange_rate_wood").innerText.match(/[0-9]+/g)[0],10),parseInt(REF.document.getElementById("premium_exchange_rate_stone").innerText.match(/[0-9]+/g)[0],10),parseInt(REF.document.getElementById("premium_exchange_rate_iron").innerText.match(/[0-9]+/g)[0],10)],a=REF.document.getElementById("incomings_amount")?parseInt(REF.document.getElementById("incomings_amount").innerHTML,10):0;if(TOZSDE_DATA.newMail&&REF.document.getElementById("menu_mail_count").innerHTML.match(/[0-9]+/g)){var o=REF.document.getElementById("menu_mail_count").innerHTML.match(/[0-9]+/g)[0];NEWMAIL<o&&(csengess("newMail"),addEvent('<span class="icon header new_mail" style="height:16px"> </span> Új üzeneted érkezett ('+o+")","info")),NEWMAIL=o}else NEWMAIL=0;if(INCOMING<a&&TOZSDE_DATA.newAttack&&(csengess("newAttack"),addEvent('<img src="/graphic/buildings/barracks.png"> Bejövő támadások száma '+a+"-re emelkedett","incoming-warning")),INCOMING=a,n[0]<10)return;if(new Date-EVENT.lastChange>3e5&&(STATUS=1,EVENT.lastChange=new Date),REF.document.getElementById("premium_exchange_form").getElementsByTagName("table")[0].classList.contains("cnc_transformed")||(putQuickButtons(),e=!0),EVENT.lastResult[0]==n[0]&&EVENT.lastResult[1]==n[1]&&EVENT.lastResult[2]==n[2])return;EVENT.lastChange=new Date,updateStatistic(n,EVENT.lastResult);for(var s=[],r=!1,i=["wood","stone","iron"],l=0;l<i.length;l++)REF.document.getElementById("premium_exchange_rate_"+i[l]).style.background="#f4e4bc";var m=REF.document.getElementById("premium_exchange_form").getElementsByTagName("table")[0],d=1+REF.PremiumExchange.data.tax.buy;if(TOZSDE_DATA.minimum&&(n[0]*d<TOZSDE_DATA.min_wood||n[1]*d<TOZSDE_DATA.min_stone||n[2]*d<TOZSDE_DATA.min_iron)){s.push("Limit alatti ár"),t="minimum",r=!0;for(l=0;l<i.length;l++)n[l]*d<TOZSDE_DATA["min_"+i[l]]&&(REF.document.getElementById("premium_exchange_rate_"+i[l]).style.background="#9bF")}if(d=1+REF.PremiumExchange.data.tax.sell,TOZSDE_DATA.maximum&&(n[0]*d>TOZSDE_DATA.max_wood||n[1]*d>TOZSDE_DATA.max_stone||n[2]*d>TOZSDE_DATA.max_iron)){s.push("Limit feletti ár"),t="maximum";for(l=0;l<i.length;l++)n[l]*d>TOZSDE_DATA["max_"+i[l]]&&(REF.document.getElementById("premium_exchange_rate_"+i[l]).style.background="#F66")}!TOZSDE_DATA.any||parseInt(m.rows[2].cells[1].innerText,10)===parseInt(m.rows[1].cells[1].innerText,10)&&parseInt(m.rows[2].cells[2].innerText,10)===parseInt(m.rows[1].cells[2].innerText,10)&&parseInt(m.rows[2].cells[3].innerText,10)===parseInt(m.rows[1].cells[3].innerText,10)||(s.push("Nyers ELADHATÓ"),t="any",r=!0),TOZSDE_DATA.keszlet&&(parseInt(m.rows[1].cells[1].innerText,10)>TOZSDE_DATA.keszlet_wood||parseInt(m.rows[1].cells[2].innerText,10)>TOZSDE_DATA.keszlet_stone||parseInt(m.rows[1].cells[3].innerText,10)>TOZSDE_DATA.keszlet_iron)&&(s.push("Készleten"),t="keszlet"),TOZSDE_DATA.action&&(100*(1-n[0]/EVENT.lastResult[0])>TOZSDE_DATA.action_wood||100*(1-n[1]/EVENT.lastResult[1])>TOZSDE_DATA.action_stone||100*(1-n[2]/EVENT.lastResult[2])>TOZSDE_DATA.action_iron)&&(s.push("Árzuhanás"),t="action",r=!0),!TOZSDE_DATA.some||REF.PremiumExchange.data.capacity.wood!=REF.PremiumExchange.data.stock.wood&&REF.PremiumExchange.data.capacity.stone!=REF.PremiumExchange.data.stock.stone&&REF.PremiumExchange.data.capacity.iron!=REF.PremiumExchange.data.stock.iron||(s.push("Nyers TELÍTETT"),t="some");for(var u=[],c=0;c<3;c++)EVENT.lastResult[c]<n[c]?u.push("+"):EVENT.lastResult[c]>n[c]?u.push("-"):u.push("=");EVENT.lastResult=n.slice(0),EVENT.lastChange=new Date,e||putQuickButtons(),addEvent([n,s,u,[m.rows[1].cells[1].innerText,m.rows[1].cells[2].innerText,m.rows[1].cells[3].innerText]]),s.length>0&&new Date>EVENT.hangSzunet&&!(EVENT.noSoundIf&&r&&REF.PremiumExchange.data.merchants<1)&&csengess(t)}catch(e){STATUS=1,console.error(e)}}function main(){try{if(next=200,!BOT)switch(STATUS){case 1:HIBA=0,iframeOperation("open"),STATUS=2,next=1333;break;case 2:isPageLoaded(REF)?(HIBA=0,tozsdekereses(),transformPage(),autoMotor(),EVENT.agressiveRefresh&&(0==AUTO_STATUS&&EVENT.agressiveRefreshTime>3?(REF.location.reload(),EVENT.agressiveRefreshTime=0):EVENT.agressiveRefreshTime++)):(next=1e3,++HIBA>6&&(STATUS=1))}}catch(e){console.error(e)}try{worker.postMessage(next)}catch(e){console.error(e),setTimeout((function(){main()}),next)}}function autoMotor(){try{switch(AUTO_STATUS){case 0:new Date-TOZSDE_AUTOINFO.lastSuccess>3333&&startAutoProcess();break;case 1:checkTransactionPopup();break;case 2:checkSuccessfulTransaction(),AUTO_STATUS=0}}catch(e){console.error(e),resetAutoState()}}worker.onmessage=function(e){main()},document.title=ID+" Tőzsde",document.getElementsByTagName("head")[0].innerHTML+='<style type="text/css">h3 { transition: width 0.5s, background 0.25s; cursor:pointer; width: 700px; margin: 10px auto; padding: 5px; border: 1px solid black; border-radius: 20px;} h3:hover {background: rgba(0,0,255,0.3) !important; width: 725px; } h3.openedH3 {background: rgba(255,255,255,0.5); width: 800px; } .autoChk {display: block;} h1:hover {color: #555} #cnc_stats {background: #aac; margin: 10px auto; border-collapse: collapse;} .plusminusbutton {outline: none; background: lightgray;opacity: 0.7;cursor:pointer} .plusminusbutton:hover {opacity:1.0} #cnc_stats td, #cnc_stats th {min-width: 50px; text-align: center; padding: 3px; border-bottom: 1px solid darkgoldenrod;} #cnc_stats td:first-child, #cnc_stats th:first-child {  text-align: left;  border-right: 1px solid black; padding-right: 20px; } #cnc_tozsde input[type="checkbox"] { margin: 0 3px 0 0; zoom: 1.3; } #cnc_tozsde #tozsde_auto td {padding: 4px} #cnc_tozsde td {padding: 2px} #cnc_tozsde #tozsde_auto input[type=number] { width: 55px; } #cnc_tozsde .bigNum input[type=number] {width: 55px } #cnc_tozsde input[type=number] {width: 47px; padding: 2px;} #allapot table tr td:not(:first-child), #allapot table tr th:not(:first-child), #cnc_tozsde th:not(:first-child) {text-align: center}.header50 {width: 50px;} .header60 {width: 60px;} #allapot table tr:hover {background-color: rgba(100,100,255,0.2)} #allapot .item-info {background-image: linear-gradient(to right, rgba(254,0,255,0.3) , transparent 14%, transparent 86%, rgba(254,0,255,0.3))} #allapot .item-sell {background-image: linear-gradient(to right, rgba(100,100,255,0.6), transparent 14%, transparent 86%, rgba(100,100,255,0.6))} #allapot .item-buy {background-image: linear-gradient(to right, rgba(254,100,100,0.3) , transparent 14%, transparent 86%, rgba(254,100,100,0.3))} #allapot .item-incoming-warning { background-image: linear-gradient(to right, rgba(255,0,0,0.8), transparent 24%, transparent 76%, rgba(255,0,0,0.8)) } #tozsde_save:not([disabled]), #auto_save:not([disabled]) { background: rgb(236,236,236); animation-name: flash; animation-duration: 1s; animation-timing-function: linear; animation-iteration-count: infinite; } @keyframes flash {      0% { background: rgb(236,236,236); }    50% { background: rgb(100,100,200); }    100% { background: rgb(236,236,236); }} </style>',document.body.innerHTML='<h1 align="center" style="cursor: context-menu;text-shadow: 3px 3px 4px #666; margin-top:10px;">Prémium Tőzsde kezelő ('+ID+')</h1><h4 style="text-align: center; margin-top:0;">'+game_data.player.name+" ("+game_data.village.display_name+')</h4><br><h3 align="center" onclick="setTabVisibility(\'h3_1\', this)">Hangjelzés beállítása</h3><form id="cnc_tozsde"><div style="display:none" id="h3_1"><table class="vis" style="margin: auto;"><tr><th>Hangjelzés, amikor...</th><th><span class="icon header wood"> </span></th><th><span class="icon header stone"> </span></th><th><span class="icon header iron"> </span></th><th>Hang</th></tr><tr><td><input type="checkbox" name="minimum"> Az árfolyam ez alá csökken:</td><td><input type="number" name="min_wood"></td><td><input type="number" name="min_stone"></td><td><input type="number" name="min_iron"></td><td>'+generateSoundSelector("minimum")+'</td></tr><tr><td><input type="checkbox" name="maximum"> Az árfolyam e fölé megy:</td><td><input name="max_wood" type="number"></td><td><input type="number" name="max_stone"></td><td><input type="number" name="max_iron"></td><td>'+generateSoundSelector("maximum")+'</td></tr><tr><td colspan="4"><input type="checkbox" name="any"> Lehetséges eladni valamit</td><td>'+generateSoundSelector("any")+'</td></tr><tr><td colspan="4"><input type="checkbox" name="some"> Nem lehet eladni valamit</td><td>'+generateSoundSelector("some")+'</td></tr><tr><td><input type="checkbox" name="action"> Hirtelen áresés történik:</td><td><input type="number" name="action_wood" type="number">%</td><td><input type="number" name="action_stone">%</td><td><input type="number" name="action_iron">%</td><td>'+generateSoundSelector("action")+'</td></tr><tr class="bigNum"><td><input type="checkbox" name="keszlet"> Készleten van ennyi nyersanyag:</td><td><input name="keszlet_wood" type="number"></td><td><input type="number" name="keszlet_stone"></td><td><input type="number" name="keszlet_iron"></td><td>'+generateSoundSelector("keszlet")+'</td></tr><tr><td colspan="4"><input type="checkbox" name="autotrans" disabled>Az automata sikeres tranzakciót hajtott végre</td><td>'+generateSoundSelector("autotrans")+'</td></tr><tr><td colspan="4"><input type="checkbox" name="newMail"><span class="icon header new_mail" style="height:16px"> </span> Új üzeneted érkezett</td><td>'+generateSoundSelector("newMail")+'</td></tr><tr><td colspan="4"><input type="checkbox" name="newAttack"><img src="/graphic/buildings/barracks.png"> Bejövő támadások száma emelkedett</td><td>'+generateSoundSelector("newAttack")+'</td></tr><tr><td colspan="4"><input type="checkbox" checked disabled> Bot védelem aktív</td><td>'+generateSoundSelector("bot")+'</td></tr></table><div style="margin:auto; width:720px; text-align: center;" id="hangero"><hr><strong>Hangerő: </strong><button type="button" onclick="hangero(-20)">-</button> <p style="display: inline; margin:0; padding: 0;">100%</p> <button type="button" onclick="hangero(20)">+</button> <button type="button" onclick="loadSoundData()">Hangok újrabetöltése</button><br>Hangjelzés szüneteltetése <input value="5" type="number" id="stoptime"> percre <button type="button" onclick="stopSound(this)">Hangszünet</button><br><div id="stopSoundTime"></div><input type="checkbox" checked onclick="stopSoundIf(this)"> Ne legyen hangjelzés limit alatt/eladható mennyiség/árzuhanás esetén, ha nincs szabad kereskedőd</div></div><h3 align="center" onclick="setTabVisibility(\'h3_2\', this)"><s>Automatika beállítása</s></h3><div id="h3_2" style="display:none"><table class="vis" style="margin: auto; border-collapse: collapse;" id="tozsde_auto"><tr><th colspan="2">Automatika tanítása</th><th><span class="icon header wood"> </span> <button type="button" onclick="copyAuto(0)">=</button></th><th><span class="icon header stone"> </span>  <button type="button" onclick="copyAuto(1)">=</button></th><th><span class="icon header iron"> </span> <button type="button" onclick="copyAuto(2)">=</button></th></tr><tr><td rowspan="4" style="text-align:center; border-right: 2px solid #F88">Nyerseladás '+generateAutoOptions("sell")+'</td><td><span class="icon header premium"> </span> Minimum limit '+generatePlusMinus("sell","minLimit")+'</td><td><input type="number" name="auto_sell_wood_minLimit"></td><td><input type="number" name="auto_sell_stone_minLimit"></td><td><input type="number" name="auto_sell_iron_minLimit"></td></tr><tr><td><span class="icon header ressources"> </span> Minimum nyers a faluban</td><td><input type="number" name="auto_sell_wood_minRes"></td><td><input type="number" name="auto_sell_stone_minRes"></td><td><input type="number" name="auto_sell_iron_minRes"></td></tr><tr><td><span class="icon header premium"> </span> Maximum limit '+generatePlusMinus("sell","maxLimit")+'</td><td><input type="number" name="auto_sell_wood_maxLimit"></td><td><input type="number" name="auto_sell_stone_maxLimit"></td><td><input type="number" name="auto_sell_iron_maxLimit"></td></tr><tr><td><span class="icon header ressources"> </span> Maximum nyers a faluban</td><td><input type="number" name="auto_sell_wood_maxRes"></td><td><input type="number" name="auto_sell_stone_maxRes"></td><td><input type="number" name="auto_sell_iron_maxRes"></td></tr><tr style="border-top: 2px solid #F88"><td rowspan="4" style="text-align:center; border-right: 2px solid #F88">Nyersvásárlás '+generateAutoOptions("buy")+'</td><td><span class="icon header premium"> </span> Minimum limit '+generatePlusMinus("buy","minLimit")+'</td><td><input type="number" name="auto_buy_wood_minLimit"></td><td><input type="number" name="auto_buy_stone_minLimit"></td><td><input type="number" name="auto_buy_iron_minLimit"></td></tr><tr><td><span class="icon header ressources"> </span> Minimum limit tartása</td><td><input type="number" name="auto_buy_wood_minRes"></td><td><input type="number" name="auto_buy_stone_minRes"></td><td><input type="number" name="auto_buy_iron_minRes"></td></tr><tr><td><span class="icon header premium"> </span> Maximum limit '+generatePlusMinus("buy","maxLimit")+'</td><td><input type="number" name="auto_buy_wood_maxLimit"></td><td><input type="number" name="auto_buy_stone_maxLimit"></td><td><input type="number" name="auto_buy_iron_maxLimit"></td></tr><tr><td><span class="icon header ressources"> </span> Maximum nyers a faluban</td><td><input type="number" name="auto_buy_wood_maxRes"></td><td><input type="number" name="auto_buy_stone_maxRes"></td><td><input type="number" name="auto_buy_iron_maxRes"></td></tr></table><div style="width:500px; text-align:center;margin:10px auto"><img src="/graphic/buildings/market.png"> Automata által meghagyott kereskedők: <input type="number" name="left_merch"></div></div><h3 align="center" onclick="setTabVisibility(\'h3_3\', this)">Egyéb beállítások</h3><div id="h3_3" style="display:none"><table class="vis" style="margin: auto; border-collapse: collapse;" id="tozsde_nyelv"><tr><th>Nyelvbeállítás</th><th><i>...a te nyelveden</i></th></tr><tr><td>"Beérkező"</td><td><input name="nameOfBeerkezo"></td><tr><td>"Elad"</td><td><input name="nameOfElad"></td><tr><td>"Vásárolj"</td><td><input name="nameOfVasarolj"></td></tr></table><p style="width: 350px;margin: 10px auto;text-align: center;"><input type="checkbox" onclick="setAgressiveRefresh(this)"> <strong>AGRESSZÍV FRISSÍTÉS</strong> (nem ajánlott)</p></div><div style="width:800px; text-align:center;margin:10px auto"><button type="button" disabled onclick="saveTozsdeData()" id="tozsde_save">Hangbeállítások alkalmazása</button> <button type="button" onclick="loadData(); loadSoundData();">Visszaállítás</button> <button type="button" id="auto_save" onclick="saveAuto()">Automata beállításainak alkalmazása</button></div></form><h3 align="center" class="openedH3" onclick="setTabVisibility(\'h3_4\', this)">Árfolyam alakulása</h3><div id="h3_4"><table id="cnc_stats"><tr><th>Statisztika</th><th><span class="icon header wood"> </span></th><th><span class="icon header stone"> </span></th><th><span class="icon header iron"> </span></th><th><span class="icon header premium"> </span></th></tr><tr><td>Legkisebb észlelt ár</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>Legmagasabb észlelt ár</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>Idő alapú átlag</td><td>-</td><td>-</td><td>-</td><td></td></tr><tr><td>Automata által eladott</td> <td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>Automata által vásárolt</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></table><div id="allapot" style="background-color: #622; margin: auto; width: 690px; padding: 0 15px; color: white; height: 300px; overflow: auto;"><table><thead style="color: black"><tr><th rowspan="2" style="width: 60px">Dátum</th><th colspan="3" style="width: 200px">Arány 1 <span class="icon header premium"> </span> &LeftArrowRightArrow;</th><th colspan="3" style="width: 250px">Készlet</th><th rowspan="2" style="width:150px">Értesítés</th></tr><tr><th class="header50" style="text-align: center"><span class="icon header wood"> </span></th><th class="header50"><span class="icon header stone"> </span></th><th class="header50"><span class="icon header iron"> </span></th>\t<th class="header60"><span class="icon header wood"> </span></th><th class="header60"><span class="icon header stone"> </span></th><th class="header60"><span class="icon header iron"> </span></th></tr></thead><tbody style="color: white"></tbody></table></div></div>',IFRAME&&(document.getElementsByTagName("body")[0].innerHTML+='<h3 align="center" onclick="setTabVisibility(\'h3_5\', this)">Munkalap</h3><div id="h3_5" style="display:none"><iframe id="tozsde_iframe" style="width:calc(100% - 15px); height:1000px;"></iframe></div>'),loadData(),main(),loadSoundData(),window.onbeforeunload=function(){return!0},UI.InfoMessage("<b>PF Tőzsde</b><br><br>Automata beállítás letiltva: hasnzálatáért bann jár"),$("#h3_2").on("change",'input:not([type="checkbox"])',(function(){var e=document.getElementById("auto_save");!1!==e.disabled&&(e.disabled=!1,e.innerHTML=e.innerHTML+"*")})),$('#h3_1 input, #h3_1 select, #h3_3 input:not([type="checkbox"])').on("change",(function(){var e=document.getElementById("tozsde_save");!1!==e.disabled&&(e.disabled=!1,e.innerHTML="*"+e.innerHTML)})),document.getElementById("h3_2").querySelectorAll("input").forEach((function(e){e.disabled=!0}));

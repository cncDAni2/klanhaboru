javascript:var REF,STATUS=1,HIBA=0,AUTO_STATUS=0,NEWMAIL=0,TOZSDE_SOUNDS=["bot2.wav","BOMB_SIREN_hosszu.mp3","Intruder_alert.mp3","alarm-frenzy.mp3","bubbling-up.mp3","capisci.mp3","decay.mp3","determined.mp3","hell-yeah.mp3","lovely.mp3","may-i-have-your-attention.mp3","nasty-error-long.mp3","nice-cut.mp3","oh-finally.mp3","on-serious-matters.mp3","system-fault.mp3","thats-nasty.mp3","néma.mp3"],BELL={},AUTO_MOTOR_DELAYER=null;document.body.style.backgroundImage="none",document.body.style.background="#e3d5b3 url(https://dshu.innogamescdn.com/asset/233cdec1/graphic/index/main_bg.jpg) scroll right top repeat";var BOT,BOTTIME,ID=game_data.world+" - K"+(game_data.village.y+"")[0]+(game_data.village.x+"")[0],CHK_FIELDS=["minimum","maximum","any","some","action","keszlet","autotrans","newMail","newAttack"],FIELDS=["min_wood","min_stone","min_iron","max_wood","max_stone","max_iron","action_wood","action_stone","action_iron","keszlet_wood","keszlet_stone","keszlet_iron","nameOfBeerkezo","nameOfElad","nameOfVasarolj"],LANGFIELDS=[],AUTO_FIELDS_SELL=["minRes","minLimit","maxRes","maxLimit"],AUTO_FIELDS_BUY=["minRes","minLimit","maxRes","maxLimit"],ISLOGIN=!0,STATS={min:[9999,9999,9999],max:[0,0,0],avg:[0,0,0,0],lastStat:new Date,autoSell:[0,0,0,0],autoBuy:[0,0,0,0]},SOUND_LOC="https://raw.githubusercontent.com/cncDAni2/klanhaboru/main/images/tozsde/",defaultSound="bot2.wav",TOZSDE_DATA={},TOZSDE_DATA_DEFAULT={minimum:!0,maximum:!1,any:!1,some:!1,min_wood:500,min_stone:500,min_iron:500,max_wood:1500,max_stone:1500,max_iron:1500,action:!0,action_wood:20,action_stone:20,action_iron:20,keszlet:!1,keszlet_wood:1e3,keszlet_stone:1e3,keszlet_iron:1e3,autotrans:!0,newMail:!1,newAttack:!0,nameOfBeerkezo:"Beérkező",nameOfElad:"Elad",nameOfVasarolj:"Vásárolj",sound:{minimum:defaultSound,maximum:defaultSound,any:defaultSound,some:defaultSound,action:defaultSound,keszlet:defaultSound,autotrans:defaultSound,newMail:defaultSound,newAttack:defaultSound}},EVENT={hangSzunet:new Date,lastResult:[0,0,0],lastChange:new Date,noSoundIf:!0,agressiveRefresh:!1,agressiveRefreshTime:0},TOZSDE_AUTO={wood:{sell:{},buy:{}},stone:{sell:{},buy:{}},iron:{sell:{},buy:{}}},ISTOZSDE_AUTO={wood:{},stone:{},iron:{}},TOZSDE_AUTOINFO={inProgress:!1,startProgress:new Date,mode:"",type:"",ppValue:0,sellValue:0,minMaxPrice:0,isError:!1,lastSuccess:new Date},INCOMING=0,LINK=window.location.href.split("village=");LINK=LINK[0]+"village="+game_data.village.id+"&screen=market&mode=exchange";var worker=createWorker((function(t){t.addEventListener("message",(function(t){setTimeout((function(){postMessage("")}),t.data)}),!1)}));function createWorker(t){var e=new Blob(["("+t.toString()+")(self)"],{type:"text/javascript"});return new Worker(window.URL.createObjectURL(e))}function generateSoundSelector(t){for(var e="<select onchange=\"changeSound(this, '"+t+'\')" name="'+t+'_sound">',n=0;n<TOZSDE_SOUNDS.length;n++)e+='<option value="'+TOZSDE_SOUNDS[n]+'">'+TOZSDE_SOUNDS[n].split(".")[0]+"</option>";return e+='</select><button type="button" onclick="csengess(\''+t+"')\">&#9654;</button>"}function generateAutoOptions(t){for(var e=["wood","stone","iron"],n='<div class="autoChk">',a=0;a<e.length;a++)n+='<span class="icon header '+e[a]+'"> </span> <input type="checkbox" onclick="stopStartAuto(this,\''+t+"', '"+e[a]+"')\"><br>";return n+="</div>"}function generatePlusMinus(t,e){return'<button type="button" class="plusminusbutton" onclick="changeLimits(\''+t+"', '"+e+'\', 25)">+</button>\t\t\t<button type="button" class="plusminusbutton" onclick="changeLimits(\''+t+"', '"+e+"', -25)\">-</button>"}function changeLimits(t,e,n){for(var a,o=document.getElementById("cnc_tozsde"),s=["wood","stone","iron"],r={},i={},l=0;l<3;l++)if(r={minL:"auto_"+t+"_"+s[l]+"_minLimit",minR:"auto_"+t+"_"+s[l]+"_minRes",maxL:"auto_"+t+"_"+s[l]+"_maxLimit",maxR:"auto_"+t+"_"+s[l]+"_maxRes"},(i={minL:parseInt(o[r.minL].value),minR:parseInt(o[r.minR].value),maxL:parseInt(o[r.maxL].value),maxR:parseInt(o[r.maxR].value)}).maxL!=i.minL){if((a=(i.maxR-i.minR)/(i.maxL-i.minL))<0)return void alert("Helytelen automata megadás");parseInt(o["auto_"+t+"_"+s[l]+"_"+e].value)<25?UI.InfoMessage("Nem csökkenthető tovább ("+s[l]+")",5e3):("minLimit"==e&&(i.minL+=n,i.minL<0&&(i.minL=0),i.minR+=Math.round(n*a),i.minR<0&&(i.minR=0),$("#tozsde_auto input[name="+r.minL+"]").val(i.minL).change(),$("#tozsde_auto input[name="+r.minR+"]").val(i.minR).change()),"maxLimit"==e&&(i.maxL+=n,i.maxL<0&&(i.maxL=0),i.maxR+=Math.round(n*a),i.maxR<0&&(i.maxR=0),$("#tozsde_auto input[name="+r.maxL+"]").val(i.maxL).change(),$("#tozsde_auto input[name="+r.maxR+"]").val(i.maxR).change()))}else UI.InfoMessage("Nem állítható tovább ("+s[l]+")",5e3)}worker.onmessage=function(t){main()},document.title=ID+" Tőzsde";let tozsdeStyle='\n\th3 {\n\t\ttransition: width 0.5s, background 0.25s;\n\t\tcursor:pointer;\n\t\twidth: 700px;\n\t\tmargin: 10px auto;\n\t\tpadding: 5px;\n\t\tborder: 1px solid black;\n\t\tborder-radius: 20px;\n\t}\n\th3:hover {\n\t\tbackground: rgba(0,0,255,0.3) !important;\n\t\twidth: 725px;\n\t}\n\th3.openedH3 {\n\t\tbackground: rgba(255,255,255,0.5);\n\t\twidth: 800px;\n\t}\n\t.autoChk {\n\t\tdisplay: block;\n\t}\n\th1:hover {\n\t\tcolor: #555\n\t}\n\t.warning-text {\n\t\tcolor: red;\n\t\tfont-size: 130%;\n\t\tfont-weight: bold;\n\t\ttext-align: center;\n\t}\n\t.auto-sugo {\n\t\ttext-align: center;\n\t\tdisplay: block;\n\t\tpadding-bottom: 15px;\n\t\tcolor: blue;\n\t}\n\t#cnc_stats {\n\t\tbackground: #aac;\n\t\tmargin: 10px auto;\n\t\tborder-collapse: collapse;\n\t}\n\t.plusminusbutton {\n\t\toutline: none;\n\t\tbackground: lightgray;\n\t\topacity: 0.7;\n\t\tcursor:pointer\n\t}\n\t.plusminusbutton:hover {\n\t\topacity:1.0\n\t}\n\t#cnc_stats td, #cnc_stats th {\n\t\tmin-width: 50px;\n\t\ttext-align: center;\n\t\tpadding: 3px;\n\t\tborder-bottom: 1px solid darkgoldenrod;\n\t}\n\t#cnc_stats td:first-child, #cnc_stats th:first-child {\n\t\ttext-align: left;\n\t\tborder-right: 1px solid black;\n\t\tpadding-right: 20px;\n\t}\n\t#cnc_tozsde input[type="checkbox"] {\n\t\tmargin: 0 3px 0 0;\n\t\tzoom: 1.3;\n\t}\n\t#cnc_tozsde #tozsde_auto td {\n\t\tpadding: 4px\n\t}\n\t#cnc_tozsde td {\n\t\tpadding: 2px\n\t}\n\t#cnc_tozsde #tozsde_auto input[type=number] {\n\t\twidth: 55px;\n\t}\n\t#cnc_tozsde .bigNum input[type=number] {\n\t\twidth: 55px \n\t}\n\t#cnc_tozsde input[type=number] {\n\t\twidth: 47px;\n\t\tpadding: 2px;\n\t}\n\t#allapot table tr td:not(:first-child), #allapot table tr th:not(:first-child), #cnc_tozsde th:not(:first-child) {\n\t\ttext-align: center\n\t}\n\t.header50 {\n\t\twidth: 50px;\n\t}\n\t.header60 {\n\t\twidth: 60px;\n\t}\n\t#allapot table tr:hover {\n\t\tbackground-color: rgba(100,100,255,0.2)\n\t}\n\t#allapot .item-info {\n\t\tbackground-image: linear-gradient(to right, rgba(254,0,255,0.3) , transparent 14%, transparent 86%, rgba(254,0,255,0.3))\n\t}\n\t#allapot .item-sell {\n\t\tbackground-image: linear-gradient(to right, rgba(100,100,255,0.6), transparent 14%, transparent 86%, rgba(100,100,255,0.6))\n\t}\n\t#allapot .item-buy {\n\t\tbackground-image: linear-gradient(to right, rgba(254,100,100,0.3) , transparent 14%, transparent 86%, rgba(254,100,100,0.3))\n\t}\n\t#allapot .item-incoming-warning {\n\t\tbackground-image: linear-gradient(to right, rgba(255,0,0,0.8), transparent 24%, transparent 76%, rgba(255,0,0,0.8)) \n\t}\n\t#tozsde_save:not([disabled]), #auto_save:not([disabled]) {\n\t\tbackground: rgb(236,236,236);\n\t\tanimation-name: flash;\n\t\tanimation-duration: 1s;\n\t\tanimation-timing-function: linear;\n\t\tanimation-iteration-count: infinite;\n\t}\n\t@keyframes flash {\n\t\t0% {\n\t\t\tbackground: rgb(236,236,236);\n\t\t}\n\t\t50% {\n\t\t\tbackground: rgb(100,100,200);\n\t\t}\n\t\t100% {\n\t\t\tbackground: rgb(236,236,236);\n\t\t}\n}',tozsdeStyle_el=document.createElement("style");function hangero(t){for(var e in BELL)-20==t&&BELL[e].volume>=.2&&(BELL[e].volume-=.2),20==t&&BELL[e].volume<=.8&&(BELL[e].volume+=.2);document.getElementById("hangero").getElementsByTagName("p")[0].innerHTML=Math.round(100*BELL.bot.volume)+"%",BELL.bot.play()}function stopSound(t){EVENT.hangSzunet=new Date;var e=document.getElementById("stopSoundTime");if("Hang visszakapcsolása"==t.innerHTML)t.innerHTML="Hangszünet",e.innerHTML="",clearTimeout(EVENT.hangSzunetTIME);else{document.getElementById("stoptime").value=document.getElementById("stoptime").value.match(/[0-9]+/g)[0];var n=document.getElementById("stoptime").value;if(""==n)return;n=parseInt(n,10),EVENT.hangSzunet.setMinutes(EVENT.hangSzunet.getMinutes()+n),t.innerHTML="Hang visszakapcsolása",e.innerHTML="Hang visszakapcsolása ekkor: "+prettyDatePrint(EVENT.hangSzunet),EVENT.hangSzunetTIME=setTimeout((function(){t.innerHTML="Hangszünet",document.getElementById("stopSoundTime").innerHTML=""}),6e4*n)}}function stopSoundIf(t){EVENT.noSoundIf=t.checked}function setAgressiveRefresh(t){EVENT.agressiveRefresh=t.checked}function setTabVisibility(t,e){var n=document.getElementById(t);"none"==n.style.display?(n.style.display="block",e.classList.contains("openedH3")||e.classList.add("openedH3")):(n.style.display="none",e.classList.remove("openedH3"))}function changeSound(t,e){var n=BELL.bot.volume;TOZSDE_DATA.sound[e]=t.value,BELL[e]=new Audio(SOUND_LOC+t.value),BELL[e].volume=n,setTimeout((function(){4==BELL[e].readyState?BELL[e].play():addEvent("&#9432; Probléma adódott a hang váltásával","info")}),1e3)}function copyAuto(t){if(confirm("Szeretné az ehhez tartozó automata beállításokat a többi nyersanyaghoz is átmásolni?"))for(var e,n,a=document.getElementById("tozsde_auto").rows,o=1;o<a.length;o++)e=(n=$(a[o]).find("input[type=number]"))[t].value,n.val(e).change()}function roundDown2(t){if(0==t)return 0;let e=t;return e=t<500?50*Math.floor(t/50):t<2500?100*Math.floor(t/100):500*Math.floor(t/500),0==e?1:e}function addEvent(t,e){try{var n,a=document.getElementById("allapot").getElementsByTagName("tbody")[0].insertRow(0);if(a.insertCell(0).innerHTML=prettyDatePrint(new Date),e)(n=a.insertCell(1)).setAttribute("colspan","7"),n.innerHTML=t,n.setAttribute("class","item-"+e);else{for(var o=1;o<4;o++)(n=a.insertCell(o)).innerHTML=s(t[2][o-1])+" "+t[0][o-1];for(o=4;o<7;o++)(n=a.insertCell(o)).innerHTML=t[3][o-4];(n=a.insertCell(7)).innerHTML=new Array(...t[1]).join("<br>")}function s(t){switch(t){case"+":return'<font style="color: red">&mapstoup;</font>';case"-":return'<font style="color: #99F">&DownTeeArrow;</font>';case"=":return'<font style="color: white; opacity: 0.5">&LeftArrowRightArrow;</font>';default:return"?"}}}catch(r){console.info("AddEvent error:",r)}}function BotvedelemBe(){BOT=!0,addEvent('BOT VÉDELEM AKTÍV! Oldd fel a játékot, vagy frissíts a lapra. <a href="javascript:BotvedelemKi();" style="color: #66D;">Frissítés</a>',"info"),csengess("bot"),BOTTIME=setInterval((function(){if(!REF||REF.document.getElementById("bot_check")||REF.document.getElementById("popup_box_bot_protection")||"Bot védelem"==REF.document.title||REF.document.getElementById("botprotection_quest"))if(void 0!==window.URL){var t=createWorker((function(t){t.addEventListener("message",(function(t){postMessage("")}),!1)}));t.onmessage=function(t){csengess("bot")},t.postMessage({})}else csengess("bot");else BotvedelemKi()}),2500)}function BotvedelemKi(){REF.location.reload(),0!=BOT&&(BELL.bot.pause(),addEvent("Bot védelem rendben.","info"),BOT=!1,clearInterval(BOTTIME))}function isPageLoaded(t){try{if(t.closed)return STATUS=1,!1;try{t.status}catch(t){return csengess("bot"),ISLOGIN&&(addEvent("A rendszer vélhetőleg kiléptette","info"),ISLOGIN=!1),!1}return ISLOGIN=!0,"complete"===t.document.readyState&&(t.document.getElementById("botprotection_quest")?(t.document.getElementById("botprotection_quest").click(),BotvedelemBe(),!1):t.document.getElementById("bot_check")?(BOT_REF.document.getElementById("bot_check").getElementsByTagName("a")[0].click(),BotvedelemBe(),!1):t.document.getElementById("bot_check")||t.document.getElementById("popup_box_bot_protection")||"Bot védelem"==t.document.title||t.document.location.href.indexOf("sid_wrong")>-1?(BotvedelemBe(),!1):-1==t.document.location.href.indexOf("exchange")?(STATUS=1,!1):!(t.document.getElementById("serverTime").innerHTML.length<4)&&!(!t.PremiumExchange||!t.document.getElementById("premium_exchange_form")))}catch(t){return!1}return!1}function stopStartAuto(t,e,n){ISTOZSDE_AUTO[n][e]=t.checked}function saveAuto(){var t,e=document.getElementById("cnc_tozsde"),n=["wood","stone","iron"];TOZSDE_AUTO={wood:{sell:{},buy:{}},stone:{sell:{},buy:{}},iron:{sell:{},buy:{}},left_merch:0};for(var a=0;a<n.length;a++)for(var o=0;o<AUTO_FIELDS_SELL.length;o++)t=e["auto_sell_"+n[a]+"_"+AUTO_FIELDS_SELL[o]],TOZSDE_AUTO[n[a]].sell[AUTO_FIELDS_SELL[o]]=parseInt(t.value,10);for(a=0;a<n.length;a++)for(o=0;o<AUTO_FIELDS_BUY.length;o++)t=e["auto_buy_"+n[a]+"_"+AUTO_FIELDS_BUY[o]],TOZSDE_AUTO[n[a]].buy[AUTO_FIELDS_BUY[o]]=parseInt(t.value,10);TOZSDE_AUTO.left_merch=parseInt(e.left_merch.value,10),localStorage.setItem("PF_tozsde_Auto"+ID,JSON.stringify(TOZSDE_AUTO)),setButtonBack("auto_save")}function saveTozsdeData(){var t=document.getElementById("cnc_tozsde");TOZSDE_DATA={sound:{}};for(var e=0;e<CHK_FIELDS.length;e++)TOZSDE_DATA[CHK_FIELDS[e]]=t[CHK_FIELDS[e]].checked,TOZSDE_DATA.sound[CHK_FIELDS[e]]=t[CHK_FIELDS[e]+"_sound"].value;TOZSDE_DATA.sound.bot=t.bot_sound.value;for(e=0;e<FIELDS.length;e++)-1==FIELDS[e].indexOf("nameOf")&&(t[FIELDS[e]].value=t[FIELDS[e]].value.replace(/[^0-9]/g,"")),""==t[FIELDS[e]].value&&(t[FIELDS[e]].value=TOZSDE_DATA_DEFAULT[FIELDS[e]]),-1==FIELDS[e].indexOf("nameOf")?TOZSDE_DATA[FIELDS[e]]=parseInt(t[FIELDS[e]].value,10):TOZSDE_DATA[FIELDS[e]]=t[FIELDS[e]].value;localStorage.setItem("PF_tozsde"+ID,JSON.stringify(TOZSDE_DATA)),isPageLoaded(REF)&&putQuickButtons(),setButtonBack("tozsde_save")}function setButtonBack(t){var e=document.getElementById(t);e.disabled=!0,e.innerHTML=e.innerHTML.replace("*","")}function loadData(){try{TOZSDE_DATA=JSON.parse(localStorage.getItem("PF_tozsde"+ID))}catch(t){TOZSDE_DATA=null}var t=document.getElementById("cnc_tozsde");TOZSDE_DATA&&null!=TOZSDE_DATA||(TOZSDE_DATA=JSON.parse(JSON.stringify(TOZSDE_DATA_DEFAULT)));for(var e=0;e<CHK_FIELDS.length;e++)t[CHK_FIELDS[e]].checked=TOZSDE_DATA[CHK_FIELDS[e]];for(e=0;e<FIELDS.length;e++)t[FIELDS[e]].value=TOZSDE_DATA[FIELDS[e]]||TOZSDE_DATA_DEFAULT[FIELDS[e]];try{TOZSDE_AUTO=JSON.parse(localStorage.getItem("PF_tozsde_Auto"+ID))}catch(t){TOZSDE_AUTO=null}if(TOZSDE_AUTO&&null!=TOZSDE_AUTO){for(e=0;e<AUTO_FIELDS_SELL.length;e++){t["auto_sell_wood_"+(n=AUTO_FIELDS_SELL[e])].value=TOZSDE_AUTO.wood.sell[n],t["auto_sell_stone_"+n].value=TOZSDE_AUTO.stone.sell[n],t["auto_sell_iron_"+n].value=TOZSDE_AUTO.iron.sell[n]}for(e=0;e<AUTO_FIELDS_BUY.length;e++){var n;t["auto_buy_wood_"+(n=AUTO_FIELDS_BUY[e])].value=TOZSDE_AUTO.wood.buy[n],t["auto_buy_stone_"+n].value=TOZSDE_AUTO.stone.buy[n],t["auto_buy_iron_"+n].value=TOZSDE_AUTO.iron.buy[n]}t.left_merch.value=TOZSDE_AUTO.left_merch||0,saveAuto()}else TOZSDE_AUTO={wood:{sell:{},buy:{}},stone:{sell:{},buy:{}},iron:{sell:{},buy:{}},left_merch:0};setButtonBack("tozsde_save"),setButtonBack("auto_save")}function loadSoundData(){var t,e=BELL.bot?BELL.bot.volume:1;TOZSDE_DATA.sound||(TOZSDE_DATA.sound=JSON.parse(JSON.stringify(TOZSDE_DATA_DEFAULT.sound)));var n=document.getElementById("cnc_tozsde");for(t in CHK_FIELDS)a(CHK_FIELDS[t]);function a(t){TOZSDE_DATA.sound[t]||(TOZSDE_DATA.sound[t]=defaultSound),n[t+"_sound"].value=TOZSDE_DATA.sound[t],BELL[t]=new Audio(SOUND_LOC+TOZSDE_DATA.sound[t]),BELL[t].volume=e}a("bot"),saveTozsdeData(),setTimeout((function(){var t=!1;for(var e in BELL)4!==BELL[e].readyState&&(t=!0,addEvent("&#9432; Probléma van a "+TOZSDE_DATA.sound[e].split(".")[0]+" hang betöltésével. Használd a hang újrabetöltését vagy a lejátszás gombot.","info"));t||addEvent("&#9432; Hangok sikeresen betölve.","info")}),3e3)}function prettyDatePrint(t){return("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}function csengess(t){try{if(!BELL[t].paused)return void BELL[t].pause();4==BELL[t].readyState?BELL[t].play():BELL[t].load()}catch(t){console.error("HIBA::Playsound",t)}}function updateStatistic(t,e){for(var n=new Date,a=(n-STATS.lastStat)/6e4,o=0;o<3;o++){if(t[o]<30)return;STATS.min[o]>t[o]&&(STATS.min[o]=t[o]),STATS.max[o]<t[o]&&(STATS.max[o]=t[o]),STATS.avg[o]=(STATS.avg[o]*STATS.avg[3]+e[o]*a)/(STATS.avg[3]+a)}STATS.avg[3]+=a,STATS.lastStat=n,function(){for(var t=document.getElementById("cnc_stats"),e=0;e<3;e++)t.rows[1].cells[e+1].innerHTML=STATS.min[e],t.rows[2].cells[e+1].innerHTML=STATS.max[e],t.rows[3].cells[e+1].innerHTML=Math.round(STATS.avg[e])}()}function updateAutoStatistic(t,e,n,a){var o=document.getElementById("cnc_stats"),s=0;"stone"==e&&(s=1),"iron"==e&&(s=2),"sell"==t?(STATS.autoSell[s]+=n,STATS.autoSell[3]+=a):(STATS.autoBuy[s]+=n,STATS.autoBuy[3]+=a);for(var r=0;r<4;r++)o.rows[4].cells[r+1].innerHTML=STATS.autoSell[r],o.rows[5].cells[r+1].innerHTML=STATS.autoBuy[r]}function getClearValue(t,e,n,a){if("sell"==n)for(var o=63;o<1e4&&!(r(t,-o,e)<=-1);o++);else for(o=63;o<1e4&&!(r(t,o,e)>=1);o++);var s=REF.PremiumExchange.data.capacity[t]-e;return"sell"==n&&a&&s>0&&o-1>s?s:o-1;function r(t,e,n){var a=REF.PremiumExchange.data.capacity[t];return(1+(e>=0?REF.PremiumExchange.data.tax.buy:REF.PremiumExchange.data.tax.sell))*(REF.PremiumExchange.calculateMarginalPrice(n,a)+REF.PremiumExchange.calculateMarginalPrice(n-e,a))*e/2}}function putQuickButtons(){try{for(var t=REF.document.getElementById("premium_exchange_form").getElementsByTagName("table")[0],e=[parseInt(t.rows[2].cells[1].innerText,10)-parseInt(t.rows[1].cells[1].innerText,10),parseInt(t.rows[2].cells[2].innerText,10)-parseInt(t.rows[1].cells[2].innerText,10),parseInt(t.rows[2].cells[3].innerText,10)-parseInt(t.rows[1].cells[3].innerText,10)],n=REF.PremiumExchange.data.merchants,a=[REF.game_data.village.wood,REF.game_data.village.stone,REF.game_data.village.iron],o=0;o<e.length;o++)e[o]>a[o]&&(e[o]=l(a[o],o)),e[o]>1e3*n&&(e[o]=l(1e3*n,o));if(t.classList.contains("cnc_transformed"))for(o=0;o<3;o++){r="";switch(o){case 0:r+="wood";break;case 1:r+="stone";break;case 2:r+="iron"}t.rows[5].cells[o+1].getElementsByTagName("button")[0].setAttribute("onclick",'setSellValue("'+r+'",'+roundDown2(u(o))+")"),t.rows[5].cells[o+1].getElementsByTagName("button")[1].setAttribute("onclick",'setValue("'+r+'",'+roundDown2(d(o))+")"),t.rows[5].cells[o+1].getElementsByTagName("button")[2].setAttribute("onclick",'setValue("'+r+'",'+e[o]+")")}else{var s=REF.document.createElement("script");s.innerHTML="function setValue(cellId, value) { $('#premium_exchange_sell_'+cellId+' input').val(value).trigger('input');\t}\t\t\t\t\t\t\tfunction setNull(cellId)   { $('#premium_exchange_sell_'+cellId+' input, #premium_exchange_buy_'+cellId+' input').val('').trigger('input'); }\t\t\t\t\t\t\tfunction setSellValue(cellId, value) { $('#premium_exchange_buy_'+cellId+' input').val(value).trigger('input'); }",REF.document.body.appendChild(s),t.rows[5].cells[1].style.position="relative",t.rows[5].cells[2].style.position="relative",t.rows[5].cells[3].style.position="relative";for(var o=0;o<3;o++){var r="";switch(o){case 0:r+="wood";break;case 1:r+="stone";break;case 2:r+="iron"}var i=REF.document.createElement("div");i.setAttribute("style","position: absolute; right: 0px; top: 20px;"),i.innerHTML='\t\t\t\t<button type="button" onclick="setSellValue(\''+r+"',"+roundDown2(u(o))+')" style="background: #F66">A</button>\t\t\t\t<button type="button" onclick="setValue(\''+r+"',"+roundDown2(d(o))+')">A</button><button type="button" onclick="setValue(\''+r+"',"+e[o]+')">Max</button><button type="button" style="background: linear-gradient(140deg, #eee 50%, #F66 51%,#F66 100%);" onclick="setNull(\''+r+"')\">X</button>",list=t.rows[5].cells[o+1].getElementsByClassName("cost-container")[0],list.insertBefore(i,list.childNodes[o])}}function l(e,n){n++;var a=parseInt(t.rows[1].cells[n].innerText,10)+e,o=parseInt(t.rows[2].cells[n].innerText,10),s=Math.floor(e-1/REF.PremiumExchange.calculateMarginalPrice(a,o));return s<0?0:s}function d(t){var e,o=0,s=1e3*n;switch(s>a[t]&&(s=a[t]),t){case 0:t="wood",o=TOZSDE_DATA.min_wood;break;case 1:t="stone",o=TOZSDE_DATA.min_stone;break;case 2:t="iron",o=TOZSDE_DATA.min_iron}var r=REF.PremiumExchange.data.stock[t],i=0;do{e=getClearValue(t,r,"sell"),i+=Math.floor(e),r+=Math.floor(e)}while(Math.round(e)<=o&&i<=s);return i-=Math.floor(e),Math.floor(i)}function u(t){var e;switch(t){case 0:t="wood",e=TOZSDE_DATA.max_wood;break;case 1:t="stone",e=TOZSDE_DATA.max_stone;break;case 2:t="iron",e=TOZSDE_DATA.max_iron}var n,a=REF.PremiumExchange.data.stock[t],o=0;do{n=getClearValue(t,a,"buy"),o+=Math.floor(n),a-=Math.floor(n)}while(Math.floor(n)>=e);return o-=Math.floor(n),Math.floor(o)}t.classList.add("cnc_transformed")}catch(m){console.error(m)}}function autoAdd(t,e,n,a){try{var o,s=REF.game_data.village[n],r=REF.document.getElementById("market_status_bar").getElementsByTagName("table");if(r.length>1&&(r=r[1].rows[0].cells)[0].innerText.indexOf(TOZSDE_DATA.nameOfBeerkezo)>-1){r=$(r[0]).find(">span");for(var i=0;i<r.length;i++)if("nowrap"==r[i].getAttribute("class")&&r[i].getElementsByTagName("span")[0].getAttribute("class").indexOf(n)>-1){s+=parseInt(r[i].innerText.replace(".",""));break}}return"sell"==a&&ISTOZSDE_AUTO[n].sell?!(t>(o=TOZSDE_AUTO[n].sell).maxLimit||1e3*(REF.PremiumExchange.data.merchants-TOZSDE_AUTO.left_merch)<e+t||REF.game_data.village[n]<e+t||s-e-t<o.minRes)&&(REF.PremiumExchange.data.capacity[n]<REF.PremiumExchange.data.stock[n]+e+t?0==e&&REF.PremiumExchange.data.capacity[n]-(REF.PremiumExchange.data.stock[n]+e):t<o.minLimit||s-e>o.minRes+(t-o.minLimit)*((o.maxRes-o.minRes)/(o.maxLimit-o.minLimit))):!("buy"!=a||!ISTOZSDE_AUTO[n].buy)&&(!(t<(o=TOZSDE_AUTO[n].buy).minLimit||REF.PremiumExchange.data.stock[n]<e+t||s+e+t>=o.maxRes)&&(t>=o.maxLimit?s+e+t<o.maxRes:s+e<=o.minRes+(t-o.minLimit)*((o.maxRes-o.minRes)/(o.maxLimit-o.minLimit))))}catch(t){return console.error(t),!1}}function resetAutoState(t=!0){TOZSDE_AUTOINFO={inProgress:!1,startProgress:new Date,mode:"",type:"",ppValue:0,sellValue:0,minMaxPrice:0,isError:!1,lastSuccess:new Date},AUTO_STATUS=0,t&&REF.location.reload()}function startAutoProcess(){var t,e,n,a=["wood","stone","iron"];if(TOZSDE_AUTOINFO.inProgress&&TOZSDE_AUTOINFO.isError){var o=parseInt(REF.document.getElementById("premium_exchange_form")[TOZSDE_AUTOINFO.mode+"_"+TOZSDE_AUTOINFO.type].value,10);if(o-=1.1*TOZSDE_AUTOINFO.minMaxPrice,isNaN(o)||o<=0)return void resetAutoState();REF.document.getElementById("premium_exchange_form")[mode+"_"+type].value=o,REF.$("#premium_exchange_form .btn.btn-premium-exchange-buy").click()}else{for(var s={},r=0;r<a.length;r++)if(e=REF.PremiumExchange.data.stock[a[r]],ISTOZSDE_AUTO[a[r]].sell&&(!0===(n=autoAdd(t=getClearValue(a[r],e,"sell",!0),0,a[r],"sell"))?((s.type&&s.currPrice>t||!s.type)&&(s.type=a[r],s.amount=t,s.currPrice=t),i(a[r],"sell",t)):"number"==typeof n&&n>0&&(s.type&&s.currPrice>t||!s.type)&&(s.type=a[r],s.amount=n,s.currPrice=t)),!s.type&&ISTOZSDE_AUTO[a[r]].buy&&autoAdd(t=getClearValue(a[r],e,"buy"),0,a[r],"buy"))return void i(a[r],"buy",t);s.type&&i(s.type,"sell",s.amount)}function i(t,e,n){var a,o=n,s=0,r=!0;for(noInteration=0;r;)s+="number"==typeof r?r:o,a=o,r=autoAdd(o=getClearValue(t,"sell"==e?REF.PremiumExchange.data.stock[t]+s:REF.PremiumExchange.data.stock[t]-s,e),s,t,e),noInteration++;0!=s&&(TOZSDE_AUTOINFO.inProgress=!0,TOZSDE_AUTOINFO.startProgress=new Date,TOZSDE_AUTOINFO.mode=e,TOZSDE_AUTOINFO.type=t,TOZSDE_AUTOINFO.minMaxPrice=a,1==noInteration&&(s=1),console.info(`Eredmény (${noInteration}pp):`,s,"--\x3e",l(roundDown2(Math.floor(s)))),REF.document.getElementById("premium_exchange_form")[e+"_"+t].value=l(roundDown2(Math.floor(s))),REF.$("#premium_exchange_sell_"+t+" input").trigger("input"),REF.$("#premium_exchange_form .btn.btn-premium-exchange-buy").click(),AUTO_STATUS=1)}function l(t){let e=parseInt(REF.document.getElementById("market_merchant_total_count").textContent,10),n=1e3*Math.floor(e/3);return Math.min(n,t)}}function checkTransactionPopup(){if(null!=REF.document.getElementById("premium_exchange")&&"none"!=REF.document.getElementById("fader").style.display){var t=REF.document.getElementById("confirmation-msg").getElementsByTagName("table")[0].rows[1].cells[1].innerText.match(/[0-9]+/g);switch(t[0]=parseInt(t[0],10),t[1]=parseInt(t[1],10),TOZSDE_AUTOINFO.mode){case"sell":if(TOZSDE_AUTOINFO.minMaxPrice<t[0]/t[1]*.97)return console.info("Hiba, végső ár nem jó",t[0]/t[1]*.97,TOZSDE_AUTOINFO.minMaxPrice),void resetAutoState();break;case"buy":if(TOZSDE_AUTOINFO.minMaxPrice>t[0]/t[1]*1.03)return console.info("Hiba, végső ár nem jó",t[0]/t[1]*1.03,TOZSDE_AUTOINFO.minMaxPrice),void resetAutoState()}TOZSDE_AUTOINFO.sellValue=t[0],TOZSDE_AUTOINFO.ppValue=t[1],REF.document.getElementById("premium_exchange").getElementsByClassName("btn-confirm-yes")[0].click(),AUTO_STATUS=2}else new Date-TOZSDE_AUTOINFO.startProgress<5e3?REF.$("#premium_exchange_form .btn.btn-premium-exchange-buy").click():(console.info("WTF-error: Nem jelenik meg a lightbox"),resetAutoState())}function checkSuccessfulTransaction(){var t=REF.document.getElementById("confirmation-msg");"none"==REF.document.getElementById("fader").style.display?(addEvent("Automata "+("sell"==TOZSDE_AUTOINFO.mode?"eladás":"vásárlás")+": "+TOZSDE_AUTOINFO.sellValue+'<span class="icon header '+TOZSDE_AUTOINFO.type+'"> </span> &LeftArrowRightArrow; '+TOZSDE_AUTOINFO.ppValue+'<span class="icon header premium"> </span> (Átlagár: '+Math.round(TOZSDE_AUTOINFO.sellValue/TOZSDE_AUTOINFO.ppValue)+")",TOZSDE_AUTOINFO.mode),updateAutoStatistic(TOZSDE_AUTOINFO.mode,TOZSDE_AUTOINFO.type,TOZSDE_AUTOINFO.sellValue,TOZSDE_AUTOINFO.ppValue),AUTO_STATUS=0,TOZSDE_DATA.autotrans&&csengess("autotrans"),resetAutoState(!1),TOZSDE_AUTOINFO.lastSuccess=new Date):t.getElementsByClassName("error").length>0?(TOZSDE_AUTOINFO.isError=!0,REF.document.getElementById("premium_exchange").getElementsByClassName("btn-confirm-no")[0].click(),console.info("Error, nem teljesíthető a parancs mert ",t.getElementById("confirmation-msg").innerHTML),REF.location.reload(),AUTO_STATUS=0):t.getElementsByClassName("warn").length>0?checkTransactionPopup():(TOZSDE_AUTOINFO.isError=!1,console.info("Lehetetlen esemény: ",REF.document.getElementById("confirmation-msg").innerHTML))}function windowOperation(t){if("open"===t)REF=window.open(LINK,"PF_tozsde_"+ID)}function transformPage(){try{var t=REF.document.getElementById("confirmation-msg"),e="",n=!1;if(t&&null!==t){t.classList.contains("cnc_transformed")?n=!0:t.classList.add("cnc_transformed");var a=t.getElementsByTagName("table")[0].rows[1].cells[1],o=a.innerText.match(/[0-9]+/g);return o=Math.round(parseInt(o[0],10)/parseInt(o[1],10)),a.innerText.indexOf(TOZSDE_DATA.nameOfElad)>-1&&(e=a.getElementsByTagName("img")[0].src.indexOf("wood")>-1&&o<=TOZSDE_DATA.min_wood||a.getElementsByTagName("img")[0].src.indexOf("stone")>-1&&o<=TOZSDE_DATA.min_stone||a.getElementsByTagName("img")[0].src.indexOf("iron")>-1&&o<=TOZSDE_DATA.min_iron?"✔":"X"),a.innerText.indexOf(TOZSDE_DATA.nameOfVasarolj)>-1&&(e=a.getElementsByTagName("img")[0].src.indexOf("wood")>-1&&o>=TOZSDE_DATA.max_wood||a.getElementsByTagName("img")[0].src.indexOf("stone")>-1&&o>=TOZSDE_DATA.max_stone||a.getElementsByTagName("img")[0].src.indexOf("iron")>-1&&o>=TOZSDE_DATA.max_iron?"✔":"X"),n||(t.getElementsByTagName("p")[0].innerHTML+="<br><b>Arány: 1 pp = "+o+" nyers "+e+"</b>"),o}return null}catch(t){console.error(t)}}function tozsdekereses(){try{var t=!1,e="",n=[parseInt(REF.document.getElementById("premium_exchange_rate_wood").innerText.match(/[0-9]+/g)[0],10),parseInt(REF.document.getElementById("premium_exchange_rate_stone").innerText.match(/[0-9]+/g)[0],10),parseInt(REF.document.getElementById("premium_exchange_rate_iron").innerText.match(/[0-9]+/g)[0],10)],a=REF.document.getElementById("incomings_amount")?parseInt(REF.document.getElementById("incomings_amount").innerHTML,10):0;if(TOZSDE_DATA.newMail&&REF.document.getElementById("menu_mail_count").innerHTML.match(/[0-9]+/g)){var o=REF.document.getElementById("menu_mail_count").innerHTML.match(/[0-9]+/g)[0];NEWMAIL<o&&(csengess("newMail"),addEvent('<span class="icon header new_mail" style="height:16px"> </span> Új üzeneted érkezett ('+o+")","info")),NEWMAIL=o}else NEWMAIL=0;if(INCOMING<a&&TOZSDE_DATA.newAttack&&(csengess("newAttack"),addEvent('<img src="/graphic/buildings/barracks.png"> Bejövő támadások száma '+a+"-re emelkedett","incoming-warning")),INCOMING=a,n[0]<10)return;if(new Date-EVENT.lastChange>3e5&&(STATUS=1,EVENT.lastChange=new Date),REF.document.getElementById("premium_exchange_form").getElementsByTagName("table")[0].classList.contains("cnc_transformed")||(putQuickButtons(),t=!0),EVENT.lastResult[0]==n[0]&&EVENT.lastResult[1]==n[1]&&EVENT.lastResult[2]==n[2])return;EVENT.lastChange=new Date,updateStatistic(n,EVENT.lastResult);const m=new Set;var s=!1,r=REF.document.getElementById("premium_exchange_form").getElementsByTagName("table")[0];const c=[parseInt(r.rows[1].cells[1].innerText,10),parseInt(r.rows[1].cells[2].innerText,10),parseInt(r.rows[1].cells[3].innerText,10)],p=[parseInt(r.rows[2].cells[1].innerText,10),parseInt(r.rows[2].cells[2].innerText,10),parseInt(r.rows[2].cells[3].innerText,10)];for(var i=["wood","stone","iron"],l=0;l<i.length;l++){REF.document.getElementById("premium_exchange_rate_"+i[l]).style.background="#f4e4bc";let t=getClearValue(i[l],REF.PremiumExchange.data.stock[i[l]],"buy");TOZSDE_DATA.maximum&&t>=TOZSDE_DATA["max_"+i[l]]&&(m.add("Limit feletti ár"),e||(e="maximum"),REF.document.getElementById("premium_exchange_rate_"+i[l]).style.background="#F66");let n=getClearValue(i[l],REF.PremiumExchange.data.stock[i[l]],"sell");TOZSDE_DATA.minimum&&(n<=TOZSDE_DATA["min_"+i[l]]||p[l]-c[l]>0&&p[l]-c[l]<TOZSDE_DATA["min_"+i[l]])&&(m.add("Limit alatti ár"),e="minimum",s=!0,REF.document.getElementById("premium_exchange_rate_"+i[l]).style.background="#9bF")}!TOZSDE_DATA.any||parseInt(r.rows[2].cells[1].innerText,10)===parseInt(r.rows[1].cells[1].innerText,10)&&parseInt(r.rows[2].cells[2].innerText,10)===parseInt(r.rows[1].cells[2].innerText,10)&&parseInt(r.rows[2].cells[3].innerText,10)===parseInt(r.rows[1].cells[3].innerText,10)||(m.add("Nyers ELADHATÓ"),e="any",s=!0),TOZSDE_DATA.keszlet&&(parseInt(r.rows[1].cells[1].innerText,10)>TOZSDE_DATA.keszlet_wood||parseInt(r.rows[1].cells[2].innerText,10)>TOZSDE_DATA.keszlet_stone||parseInt(r.rows[1].cells[3].innerText,10)>TOZSDE_DATA.keszlet_iron)&&(m.add("Készleten"),e="keszlet"),TOZSDE_DATA.action&&(100*(1-n[0]/EVENT.lastResult[0])>TOZSDE_DATA.action_wood||100*(1-n[1]/EVENT.lastResult[1])>TOZSDE_DATA.action_stone||100*(1-n[2]/EVENT.lastResult[2])>TOZSDE_DATA.action_iron)&&(m.add("Árzuhanás"),e="action",s=!0),!TOZSDE_DATA.some||REF.PremiumExchange.data.capacity.wood!=REF.PremiumExchange.data.stock.wood&&REF.PremiumExchange.data.capacity.stone!=REF.PremiumExchange.data.stock.stone&&REF.PremiumExchange.data.capacity.iron!=REF.PremiumExchange.data.stock.iron||(m.add("Nyers TELÍTETT"),e="some");for(var d=[],u=0;u<3;u++)EVENT.lastResult[u]<n[u]?d.push("+"):EVENT.lastResult[u]>n[u]?d.push("-"):d.push("=");EVENT.lastResult=n.slice(0),EVENT.lastChange=new Date,t||putQuickButtons(),addEvent([n,m,d,[r.rows[1].cells[1].innerText,r.rows[1].cells[2].innerText,r.rows[1].cells[3].innerText]]),m.size>0&&new Date>EVENT.hangSzunet&&!(EVENT.noSoundIf&&s&&REF.PremiumExchange.data.merchants<1)&&csengess(e)}catch(t){STATUS=1,console.error(t)}}function main(){try{if(next=1e3,!BOT)switch(STATUS){case 1:HIBA=0,windowOperation("open"),STATUS=2,next=1333;break;case 2:isPageLoaded(REF)?(HIBA=0,tozsdekereses(),transformPage(),null==AUTO_MOTOR_DELAYER&&(AUTO_MOTOR_DELAYER=setTimeout((()=>autoMotor()),800+500*Math.random())),EVENT.agressiveRefresh&&(0==AUTO_STATUS&&EVENT.agressiveRefreshTime>3?(REF.location.reload(),EVENT.agressiveRefreshTime=0):EVENT.agressiveRefreshTime++)):(next=1e3,++HIBA>6&&(STATUS=1))}}catch(t){console.error(t)}try{worker.postMessage(next)}catch(t){console.error(t),setTimeout((function(){main()}),next)}}function autoMotor(){try{switch(AUTO_MOTOR_DELAYER=null,AUTO_STATUS){case 0:new Date-TOZSDE_AUTOINFO.lastSuccess>1e3*REF.PremiumExchange.COOLDOWN_SECONDS+1e3&&(ISTOZSDE_AUTO.wood.buy||ISTOZSDE_AUTO.wood.sell||ISTOZSDE_AUTO.stone.buy||ISTOZSDE_AUTO.stone.sell||ISTOZSDE_AUTO.iron.buy||ISTOZSDE_AUTO.iron.sell)&&startAutoProcess();break;case 1:checkTransactionPopup();break;case 2:checkSuccessfulTransaction(),AUTO_STATUS=0}}catch(t){console.error(t),resetAutoState()}}tozsdeStyle_el.textContent=tozsdeStyle,document.head.appendChild(tozsdeStyle_el),document.body.innerHTML='<h1 align="center" style="cursor: context-menu;text-shadow: 3px 3px 4px #666; margin-top:10px;">Prémium Tőzsde kezelő ('+ID+')</h1><h4 style="text-align: center; margin-top:0;">'+game_data.player.name+" ("+game_data.village.display_name+')</h4><br><h3 align="center" onclick="setTabVisibility(\'h3_1\', this)">Hangjelzés beállítása</h3><form id="cnc_tozsde"><div style="display:none" id="h3_1"><table class="vis" style="margin: auto;"><tr><th>Hangjelzés, amikor...</th><th><span class="icon header wood"> </span></th><th><span class="icon header stone"> </span></th><th><span class="icon header iron"> </span></th><th>Hang</th></tr><tr><td><input type="checkbox" name="minimum"> Az árfolyam ez alá csökken:</td><td><input type="number" name="min_wood"></td><td><input type="number" name="min_stone"></td><td><input type="number" name="min_iron"></td><td>'+generateSoundSelector("minimum")+'</td></tr><tr><td><input type="checkbox" name="maximum"> Az árfolyam e fölé megy:</td><td><input name="max_wood" type="number"></td><td><input type="number" name="max_stone"></td><td><input type="number" name="max_iron"></td><td>'+generateSoundSelector("maximum")+'</td></tr><tr><td colspan="4"><input type="checkbox" name="any"> Lehetséges eladni valamit</td><td>'+generateSoundSelector("any")+'</td></tr><tr><td colspan="4"><input type="checkbox" name="some"> Nem lehet eladni valamit</td><td>'+generateSoundSelector("some")+'</td></tr><tr><td><input type="checkbox" name="action"> Hirtelen áresés történik:</td><td><input type="number" name="action_wood" type="number">%</td><td><input type="number" name="action_stone">%</td><td><input type="number" name="action_iron">%</td><td>'+generateSoundSelector("action")+'</td></tr><tr class="bigNum"><td><input type="checkbox" name="keszlet"> Készleten van ennyi nyersanyag:</td><td><input name="keszlet_wood" type="number"></td><td><input type="number" name="keszlet_stone"></td><td><input type="number" name="keszlet_iron"></td><td>'+generateSoundSelector("keszlet")+'</td></tr><tr><td colspan="4"><input type="checkbox" name="autotrans" disabled>Az automata sikeres tranzakciót hajtott végre</td><td>'+generateSoundSelector("autotrans")+'</td></tr><tr><td colspan="4"><input type="checkbox" name="newMail"><span class="icon header new_mail" style="height:16px"> </span> Új üzeneted érkezett</td><td>'+generateSoundSelector("newMail")+'</td></tr><tr><td colspan="4"><input type="checkbox" name="newAttack"><img src="/graphic/buildings/barracks.png"> Bejövő támadások száma emelkedett</td><td>'+generateSoundSelector("newAttack")+'</td></tr><tr><td colspan="4"><input type="checkbox" checked disabled> Bot védelem aktív</td><td>'+generateSoundSelector("bot")+'</td></tr></table><div style="margin:auto; width:720px; text-align: center;" id="hangero"><hr><strong>Hangerő: </strong><button type="button" onclick="hangero(-20)">-</button> <p style="display: inline; margin:0; padding: 0;">100%</p> <button type="button" onclick="hangero(20)">+</button> <button type="button" onclick="loadSoundData()">Hangok újrabetöltése</button><br>Hangjelzés szüneteltetése <input value="5" type="number" id="stoptime"> percre <button type="button" onclick="stopSound(this)">Hangszünet</button><br><div id="stopSoundTime"></div><input type="checkbox" checked onclick="stopSoundIf(this)"> Ne legyen hangjelzés limit alatt/eladható mennyiség/árzuhanás esetén, ha nincs szabad kereskedőd</div></div><h3 align="center" onclick="setTabVisibility(\'h3_2\', this)">Automatika beállítása</h3><div id="h3_2" style="display:none"><p class="warning-text">FIGYELEM! Az automatika kiemelten figyelt terület, könnyen bann járhat használatáért!</p><a class="auto-sugo" target="_BLANK" href="https://github.com/cncDAni2/klanhaboru/blob/main/images/tozsde/automata_sugo.png?raw=true">Súgó/példakép betanításhoz</a><table class="vis" style="margin: auto; border-collapse: collapse;" id="tozsde_auto"><tr><th colspan="2">Automatika tanítása</th><th><span class="icon header wood"> </span> <button type="button" onclick="copyAuto(0)">=</button></th><th><span class="icon header stone"> </span>  <button type="button" onclick="copyAuto(1)">=</button></th><th><span class="icon header iron"> </span> <button type="button" onclick="copyAuto(2)">=</button></th></tr><tr><td rowspan="4" style="text-align:center; border-right: 2px solid #F88">Nyerseladás '+generateAutoOptions("sell")+'</td><td><span class="icon header premium"> </span> Minimum limit '+generatePlusMinus("sell","minLimit")+'</td><td><input type="number" name="auto_sell_wood_minLimit"></td><td><input type="number" name="auto_sell_stone_minLimit"></td><td><input type="number" name="auto_sell_iron_minLimit"></td></tr><tr><td><span class="icon header ressources"> </span> Minimum nyers a faluban</td><td><input type="number" name="auto_sell_wood_minRes"></td><td><input type="number" name="auto_sell_stone_minRes"></td><td><input type="number" name="auto_sell_iron_minRes"></td></tr><tr><td><span class="icon header premium"> </span> Maximum limit '+generatePlusMinus("sell","maxLimit")+'</td><td><input type="number" name="auto_sell_wood_maxLimit"></td><td><input type="number" name="auto_sell_stone_maxLimit"></td><td><input type="number" name="auto_sell_iron_maxLimit"></td></tr><tr><td><span class="icon header ressources"> </span> Maximum nyers a faluban</td><td><input type="number" name="auto_sell_wood_maxRes"></td><td><input type="number" name="auto_sell_stone_maxRes"></td><td><input type="number" name="auto_sell_iron_maxRes"></td></tr><tr style="border-top: 2px solid #F88"><td rowspan="4" style="text-align:center; border-right: 2px solid #F88">Nyersvásárlás '+generateAutoOptions("buy")+'</td><td><span class="icon header premium"> </span> Minimum limit '+generatePlusMinus("buy","minLimit")+'</td><td><input type="number" name="auto_buy_wood_minLimit"></td><td><input type="number" name="auto_buy_stone_minLimit"></td><td><input type="number" name="auto_buy_iron_minLimit"></td></tr><tr><td><span class="icon header ressources"> </span> Minimum limit tartása</td><td><input type="number" name="auto_buy_wood_minRes"></td><td><input type="number" name="auto_buy_stone_minRes"></td><td><input type="number" name="auto_buy_iron_minRes"></td></tr><tr><td><span class="icon header premium"> </span> Maximum limit '+generatePlusMinus("buy","maxLimit")+'</td><td><input type="number" name="auto_buy_wood_maxLimit"></td><td><input type="number" name="auto_buy_stone_maxLimit"></td><td><input type="number" name="auto_buy_iron_maxLimit"></td></tr><tr><td><span class="icon header ressources"> </span> Maximum nyers a faluban</td><td><input type="number" name="auto_buy_wood_maxRes"></td><td><input type="number" name="auto_buy_stone_maxRes"></td><td><input type="number" name="auto_buy_iron_maxRes"></td></tr></table><div style="width:500px; text-align:center;margin:10px auto"><img src="/graphic/buildings/market.png"> Automata által meghagyott kereskedők: <input type="number" name="left_merch"></div></div><h3 align="center" onclick="setTabVisibility(\'h3_3\', this)">Egyéb beállítások</h3><div id="h3_3" style="display:none"><table class="vis" style="margin: auto; border-collapse: collapse;" id="tozsde_nyelv"><tr><th>Nyelvbeállítás</th><th><i>...a te nyelveden</i></th></tr><tr><td>"Beérkező"</td><td><input name="nameOfBeerkezo"></td><tr><td>"Elad"</td><td><input name="nameOfElad"></td><tr><td>"Vásárolj"</td><td><input name="nameOfVasarolj"></td></tr></table><p style="width: 350px;margin: 10px auto;text-align: center;"><input type="checkbox" onclick="setAgressiveRefresh(this)"> <strong>AGRESSZÍV FRISSÍTÉS</strong> (nem ajánlott)</p></div><div style="width:800px; text-align:center;margin:10px auto"><button type="button" disabled onclick="saveTozsdeData()" id="tozsde_save">Hangbeállítások alkalmazása</button> <button type="button" onclick="loadData(); loadSoundData();">Visszaállítás</button> <button type="button" id="auto_save" onclick="saveAuto()">Automata beállításainak alkalmazása</button></div></form><h3 align="center" class="openedH3" onclick="setTabVisibility(\'h3_4\', this)">Árfolyam alakulása</h3><div id="h3_4"><table id="cnc_stats"><tr><th>Statisztika</th><th><span class="icon header wood"> </span></th><th><span class="icon header stone"> </span></th><th><span class="icon header iron"> </span></th><th><span class="icon header premium"> </span></th></tr><tr><td>Legkisebb észlelt ár</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>Legmagasabb észlelt ár</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>Idő alapú átlag</td><td>-</td><td>-</td><td>-</td><td></td></tr><tr><td>Automata által eladott</td> <td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>Automata által vásárolt</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></table><div id="allapot" style="background-color: #622; margin: auto; width: 690px; padding: 0 15px; color: white; height: 300px; overflow: auto;"><table><thead style="color: black"><tr><th rowspan="2" style="width: 60px">Dátum</th><th colspan="3" style="width: 200px">Arány 1 <span class="icon header premium"> </span> &LeftArrowRightArrow;</th><th colspan="3" style="width: 250px">Készlet</th><th rowspan="2" style="width:150px">Értesítés</th></tr><tr><th class="header50" style="text-align: center"><span class="icon header wood"> </span></th><th class="header50"><span class="icon header stone"> </span></th><th class="header50"><span class="icon header iron"> </span></th>\t<th class="header60"><span class="icon header wood"> </span></th><th class="header60"><span class="icon header stone"> </span></th><th class="header60"><span class="icon header iron"> </span></th></tr></thead><tbody style="color: white"></tbody></table></div></div>',loadData(),main(),loadSoundData(),window.onbeforeunload=function(){return!0},$("#h3_2").on("change",'input:not([type="checkbox"])',(function(){var t=document.getElementById("auto_save");!1!==t.disabled&&(t.disabled=!1,t.innerHTML=t.innerHTML+"*")})),$('#h3_1 input, #h3_1 select, #h3_3 input:not([type="checkbox"])').on("change",(function(){var t=document.getElementById("tozsde_save");!1!==t.disabled&&(t.disabled=!1,t.innerHTML="*"+t.innerHTML)}));
javascript:try{null!=document.getElementById("options").innerHTML&&(alert("Már fut"),exit(0))}catch(e){}var currentUrl=document.location.href;if("txt"!=currentUrl.slice(-3)){alert("Ez a script a világ adatainál tud futni.\nPl: http://hu1.klanhaboru.hu/map/village.txt \n\n Megpróbálom új lapon megnyitni");let e=new RegExp(`${game_data.world}.[a-z.]+`,"g");window.open("http://"+game_data.world+"."+currentUrl.match(e)[0].replace(game_data.world+".","")+"/map/village.txt","_BLANK"),exit(0)}try{sor=document.documentElement.innerText.split("\n"),document.documentElement.innerHTML+='<div id="options" style="width: 278px;  background: #e3c68c; background-image: url(\'https://raw.githubusercontent.com/cncDAni2/klanhaboru/main/images/Bir_ker.jpg\');background-repeat:no-repeat; background-position:left top; color: black; text-shadow: 0 0 0px black;  position: fixed; left:10%; top:10%; border:3px solid black; text-shadow: 0 0 2px white; font-size: 15px; font-family:Lucida Sans Unicode; padding: 13px; z-index:2;"><br><p style="display:inline">Falu(k): </p><a href="javascript: csere()" style="text-decoration:none; border-bottom:1px dashed #0000CC; font-size:small; color:#55F">(Csere)</a> <input type="text" value="" size="17" id="falus"><br>Max táv:<input type="text" value="10.0" size="4"> mező<br>Min pont:<input type="text" value="" size="4">Max pont:<input type="text" value="" size="4"><br>Falunév leszűrő: <input type="text" value="V%C3%A1roskapu" size="15"><br><input type="radio" name="selector" value="mind" checked="true">Minden<br><input type="radio" name="selector" value="barb">Csak barbár<br><input type="radio" name="selector" value="jatek">Csak játékos<br><input type="button" style="margin-top:5px" onclick="javascript: keres()" value="Keresés..."><br><br>Eredmény:<br><textarea style="background-color: #c0c0c0; color: black; opacity: 0.8;" id="result" onclick=\'this.select();\' rows="10" cols="33" readonly="readonly"></textarea><p id="work" style="position: absolute;bottom: 170px;right: 39px; padding: 0; margin: 0 0 6px 0;"></p></div>',data=document.getElementById("options"),result=document.getElementById("result")}catch(e){alert(e)}function csere(){try{var e=data.getElementsByTagName("p")[0];return void("Falu(k): "==e.innerHTML?(e.innerHTML="Játékos ID: ",document.getElementById("falus").setAttribute("size","14")):(e.innerHTML="Falu(k): ",document.getElementById("falus").setAttribute("size","17")))}catch(e){alert("Hiba történt:\n"+e)}}function keres(){try{var e=[];if("Játékos ID: "==data.getElementsByTagName("p")[0].innerHTML){var t=data.getElementsByTagName("input")[0].value;if(""==(t=t.replace(/[^0-9]/g,"")))return void alert("A játékos azonosítója csak számokból áll.");data.getElementsByTagName("input")[0].value=t;for(var a=!1,n=1;n<sor.length;n++)sor[n].split(",")[4]==t&&(a=!0,e.push(sor[n].split(",")[2]+"|"+sor[n].split(",")[3]));if(!a)return void alert("Nem létezik játékos ilyen azonosítóval!")}else try{e=data.getElementsByTagName("input")[0].value.match(/[0-9]{1,3}(\|)[0-9]{1,3}/g)}catch(e){return void alert("Nem található koordináta a listában")}result.innerHTML="FaluID\tKoordi\tTáv\tPontszám\tJátékos ID\n";var r=data.getElementsByTagName("input")[1].value;if(r=r.replace(/[^0-9\.]/g,""),data.getElementsByTagName("input")[1].value=r,""==r)return void alert("A távolság egy pozitív valós szám lehet. Tizedesvessző elválasztására .-ot használj!");r=parseFloat(r),data.getElementsByTagName("input")[1].value=r;var l=data.getElementsByTagName("input")[2].value;l=l.replace(/[^0-9]/g,""),data.getElementsByTagName("input")[2].value=l;var i=data.getElementsByTagName("input")[3].value;i=i.replace(/[^0-9]/g,""),data.getElementsByTagName("input")[3].value=i,""==l&&(l=0),""!=i&&"0"!=i||(i=13e3),l=parseInt(l),(i=parseInt(i))<l&&(i=l,data.getElementsByTagName("input")[3].value=i);var o=!0;0==data.getElementsByTagName("input")[6].checked&&(o=!1);var s=!1;1==data.getElementsByTagName("input")[7].checked&&(s=!0);var p=data.getElementsByTagName("input")[4].value;document.getElementById("work").innerHTML='<img src="http://muhely2.cncdani2.freeiz.com/images/preloader-w8-line-black.gif" alt="" width="100px">Feldolgozás...';var u="";for(n=0;n<sor.length;n++)if(pont=parseInt(sor[n].split(",")[5]),!(pont<l||pont>i||o&&"0"!=sor[n].split(",")[4]||s&&"0"==sor[n].split(",")[4]||p==sor[n].split(",")[1]))for(var d=0;d<e.length;d++){var c=parseInt(sor[n].split(",")[2]),m=Math.abs(parseInt(e[d].match(/[0-9]+/g)[0],10)-c);if(!(m>r)){var g=parseInt(sor[n].split(",")[3]),v=Math.abs(parseInt(e[d].match(/[0-9]+/g)[1],10)-g);if(!(v>r)&&(RTav=Math.sqrt(Math.pow(v,2)+Math.pow(m,2)),RTav<=r)){RTav=RTav.toFixed(2),RTav=RTav.toString(),RTav=RTav.replace(".",","),u+=sor[n].split(",")[0]+"\t"+c+"|"+g+"\t"+RTav+"\t"+sor[n].split(",")[5]+"\t"+sor[n].split(",")[4]+"\n";break}}}document.getElementById("result").innerHTML+=u}catch(e){alert(e)}document.getElementById("work").innerHTML="Feldolgozás kész!"}void(0);